# Input-Text-Email Component Schema
#
# Stemma System: Form Inputs Family
# Component Type: Semantic (inherits from Input-Text-Base)
# Naming Convention: [Family]-[Type]-[Variant] = Input-Text-Email
#
# This schema defines the behavioral contracts and properties for the
# Input-Text-Email component, which extends Input-Text-Base with
# email validation and autocomplete functionality.

name: Input-Text-Email
type: semantic
family: FormInputs
inherits: Input-Text-Base
version: "1.0.0"
readiness: production-ready
omits: [type, autocomplete]

# Component description
description: |
  Email input component extending Input-Text-Base with email-specific
  validation and autocomplete functionality. Validates email format on blur
  using RFC 5322 compliant pattern and enables browser/platform email autofill.

# Reusable behaviors this component implements (inherited + extended)
behaviors:
  - focusable          # Inherited from Input-Text-Base
  - validatable        # Inherited from Input-Text-Base
  - float-label        # Inherited from Input-Text-Base
  - accessible         # Inherited from Input-Text-Base
  - email-validation   # Extended: Email format validation
  - email-autocomplete # Extended: Email autofill support

# Component properties (extends Input-Text-Base)
properties:
  # Inherited from Input-Text-Base
  id:
    type: string
    required: true
    description: Unique identifier for the input element
  
  label:
    type: string
    required: true
    description: Label text (floats between placeholder and floated positions)
  
  value:
    type: string
    required: true
    description: Current input value
  
  onChange:
    type: "(value: string) => void"
    required: true
    description: Callback when value changes
  
  onFocus:
    type: "() => void"
    required: false
    description: Callback when input receives focus
  
  onBlur:
    type: "() => void"
    required: false
    description: Callback when input loses focus
  
  helperText:
    type: string
    required: false
    description: Helper text displayed below input (persistent)
  
  errorMessage:
    type: string
    required: false
    description: Error message from props (takes precedence over validation error)
  
  isSuccess:
    type: boolean
    required: false
    default: false
    description: Success state indicator (shows success icon)
  
  showInfoIcon:
    type: boolean
    required: false
    default: false
    description: Info icon support (shows info icon, triggers helper text)
  
  placeholder:
    type: string
    required: false
    description: Placeholder text (only shown when label is floated and input is empty)
  
  readOnly:
    type: boolean
    required: false
    default: false
    description: Read-only state (alternative to disabled)
  
  required:
    type: boolean
    required: false
    default: false
    description: Required field indicator
  
  maxLength:
    type: number
    required: false
    description: Maximum length for input value
  
  testID:
    type: string
    required: false
    description: Test ID for automated testing
  
  className:
    type: string
    required: false
    description: Additional CSS class names (web only)
  
  # Fixed properties for email input
  type:
    type: "'email'"
    required: false
    default: "'email'"
    fixed: true
    description: Input type is fixed to 'email' for this semantic component
  
  autocomplete:
    type: "'email'"
    required: false
    default: "'email'"
    fixed: true
    description: Autocomplete is fixed to 'email' for browser autofill support
  
  # Email-specific properties
  customValidator:
    type: "(email: string) => boolean"
    required: false
    description: Custom email validation function (overrides default RFC 5322 pattern)
  
  invalidEmailMessage:
    type: string
    required: false
    default: "'Please enter a valid email address'"
    description: Custom error message for invalid email format
  
  onValidate:
    type: "(isValid: boolean, errorMessage?: string) => void"
    required: false
    description: Callback when validation occurs (on blur)

# Behavioral contracts moved to contracts.yaml
# Design tokens this component requires (inherited from Input-Text-Base)
tokens:
  # All tokens inherited from Input-Text-Base
  typography:
    - typography.labelMd
    - typography.labelMdFloat
    - typography.input
    - typography.caption
  color:
    - color.text.muted
    - color.text.default
    - color.primary
    - color.error
    - color.error.strong
    - color.success.strong
    - color.border
    - color.background
  spacing:
    - space.inset.100
    - space.grouped.tight
    - space.grouped.minimal
  motion:
    - motion.floatLabel
    - motion.focusTransition
  border:
    - borderDefault
    - radius150
  accessibility:
    - tapAreaRecommended
    - accessibility.focus.width
    - accessibility.focus.offset
    - accessibility.focus.color
  icon:
    - icon.size100
  blend:
    - blend.focusSaturate
    - blend.disabledDesaturate

# Supported platforms
platforms:
  - web
  - ios
  - android

# Platform-specific implementation notes
platform_notes:
  web:
    element: "<input-text-email>"
    implementation: Web Component wrapping Input-Text-Base
    file: platforms/web/InputTextEmail.web.ts
    keyboard: Email keyboard on mobile browsers
    autocomplete: autocomplete="email" attribute
  ios:
    implementation: SwiftUI View wrapping InputTextBase
    file: platforms/ios/InputTextEmail.ios.swift
    keyboard: UIKeyboardType.emailAddress
    autocomplete: UITextContentType.emailAddress
  android:
    implementation: Jetpack Compose Composable wrapping InputTextBase
    file: platforms/android/InputTextEmail.android.kt
    keyboard: KeyboardType.Email
    autocomplete: Autofill framework email type

# Inheritance relationship
inheritance:
  parent: Input-Text-Base
  extends:
    - email_format validation
    - email autocomplete
  fixed_properties:
    type: email
    autocomplete: email

# Accessibility compliance (inherited + extended)
accessibility:
  wcag_level: AA
  compliance:
    # Inherited from Input-Text-Base
    - "1.4.1 Use of Color - Error/success states use icons, not just color"
    - "1.4.3 Contrast (Minimum) - All text meets 4.5:1 contrast"
    - "1.4.11 Non-text Contrast - Focus ring meets 3:1 contrast"
    - "2.1.1 Keyboard - Fully keyboard accessible"
    - "2.4.7 Focus Visible - Clear focus indicator"
    - "2.3.3 Animation from Interactions - Respects reduced motion"
    - "3.3.1 Error Identification - Errors clearly identified"
    - "3.3.2 Labels or Instructions - Label always visible"
    - "4.1.2 Name, Role, Value - Proper ARIA attributes"
    # Email-specific
    - "1.3.5 Identify Input Purpose - Email autocomplete enabled"

