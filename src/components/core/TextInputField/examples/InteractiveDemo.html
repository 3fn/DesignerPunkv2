<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TextInputField - Interactive Demo</title>
  <!-- 
    âš ï¸ IMPORTANT: This demo currently has module loading issues due to CommonJS compilation.
    
    For a working demo, please use SimpleBrowserDemo.html instead:
    http://127.0.0.1:8001/src/components/core/TextInputField/examples/SimpleBrowserDemo.html
    
    This file will be fixed once we set up proper ES module bundling for browser usage.
  -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 40px;
      font-size: 2.5rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .demo-card {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      margin-bottom: 30px;
    }

    .demo-section {
      margin-bottom: 40px;
    }

    .demo-section:last-child {
      margin-bottom: 0;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #1a202c;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e2e8f0;
    }

    .input-group {
      margin-bottom: 24px;
    }

    .input-group:last-child {
      margin-bottom: 0;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }

    .instructions {
      background: #f7fafc;
      border-left: 4px solid #667eea;
      padding: 16px;
      border-radius: 4px;
      margin-bottom: 30px;
    }

    .instructions h3 {
      font-size: 1rem;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 8px;
    }

    .instructions ul {
      list-style: none;
      padding-left: 0;
    }

    .instructions li {
      color: #4a5568;
      margin-bottom: 4px;
      padding-left: 20px;
      position: relative;
    }

    .instructions li:before {
      content: "â†’";
      position: absolute;
      left: 0;
      color: #667eea;
      font-weight: bold;
    }

    .button-group {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    button.primary {
      background: #667eea;
      color: white;
    }

    button.primary:hover {
      background: #5568d3;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    button.secondary {
      background: #e2e8f0;
      color: #2d3748;
    }

    button.secondary:hover {
      background: #cbd5e0;
    }

    .status-message {
      margin-top: 20px;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.875rem;
      display: none;
    }

    .status-message.success {
      background: #c6f6d5;
      color: #22543d;
      border: 1px solid #9ae6b4;
    }

    .status-message.error {
      background: #fed7d7;
      color: #742a2a;
      border: 1px solid #fc8181;
    }

    .status-message.show {
      display: block;
    }

    @media (max-width: 640px) {
      .form-row {
        grid-template-columns: 1fr;
      }

      .button-group {
        flex-direction: column;
      }

      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŽ¯ TextInputField Interactive Demo</h1>

    <div class="demo-card">
      <div class="instructions">
        <h3>Try These Interactions:</h3>
        <ul>
          <li>Click on any input to see the focus state</li>
          <li>Start typing to see the label animation</li>
          <li>Tab between fields to test keyboard navigation</li>
          <li>Submit the form to see validation in action</li>
          <li>Clear fields to see the label return to default position</li>
        </ul>
      </div>

      <!-- Basic Interaction Section -->
      <div class="demo-section">
        <h2 class="section-title">Basic Interaction</h2>
        
        <div class="input-group">
          <text-input-field
            id="name-input"
            label="Full Name"
            placeholder="Enter your full name"
            helper-text="This will be displayed on your profile">
          </text-input-field>
        </div>

        <div class="input-group">
          <text-input-field
            id="email-input"
            label="Email Address"
            type="email"
            placeholder="you@example.com"
            helper-text="We'll never share your email">
          </text-input-field>
        </div>

        <div class="input-group">
          <text-input-field
            id="phone-input"
            label="Phone Number"
            type="tel"
            placeholder="(555) 123-4567">
          </text-input-field>
        </div>
      </div>

      <!-- Form Validation Section -->
      <div class="demo-section">
        <h2 class="section-title">Form with Validation</h2>
        
        <form id="demo-form">
          <div class="form-row">
            <text-input-field
              id="first-name"
              label="First Name"
              required
              helper-text="Required field">
            </text-input-field>

            <text-input-field
              id="last-name"
              label="Last Name"
              required
              helper-text="Required field">
            </text-input-field>
          </div>

          <div class="input-group">
            <text-input-field
              id="username"
              label="Username"
              required
              helper-text="Must be at least 3 characters">
            </text-input-field>
          </div>

          <div class="input-group">
            <text-input-field
              id="password"
              label="Password"
              type="password"
              required
              helper-text="Must be at least 8 characters">
            </text-input-field>
          </div>

          <div class="button-group">
            <button type="submit" class="primary">Submit Form</button>
            <button type="reset" class="secondary">Reset</button>
          </div>

          <div id="form-status" class="status-message"></div>
        </form>
      </div>

      <!-- Different States Section -->
      <div class="demo-section">
        <h2 class="section-title">Test Different States</h2>
        
        <div class="input-group">
          <text-input-field
            id="test-input"
            label="Test Input"
            placeholder="Type here to test">
          </text-input-field>
        </div>

        <div class="button-group">
          <button type="button" class="secondary" onclick="showError()">Show Error</button>
          <button type="button" class="secondary" onclick="showSuccess()">Show Success</button>
          <button type="button" class="secondary" onclick="clearState()">Clear State</button>
          <button type="button" class="secondary" onclick="fillValue()">Fill Value</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { TextInputField } from '../../../../dist/components/core/TextInputField/platforms/web/TextInputField.browser.js';

    // Register the custom element
    if (!customElements.get('text-input-field')) {
      customElements.define('text-input-field', TextInputField);
    }

    // Form validation
    const form = document.getElementById('demo-form');
    const statusMessage = document.getElementById('form-status');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const firstName = document.getElementById('first-name');
      const lastName = document.getElementById('last-name');
      const username = document.getElementById('username');
      const password = document.getElementById('password');

      let hasError = false;

      // Validate first name
      if (!firstName.value || firstName.value.trim().length === 0) {
        firstName.setAttribute('error', 'First name is required');
        hasError = true;
      } else {
        firstName.removeAttribute('error');
      }

      // Validate last name
      if (!lastName.value || lastName.value.trim().length === 0) {
        lastName.setAttribute('error', 'Last name is required');
        hasError = true;
      } else {
        lastName.removeAttribute('error');
      }

      // Validate username
      if (!username.value || username.value.trim().length < 3) {
        username.setAttribute('error', 'Username must be at least 3 characters');
        hasError = true;
      } else {
        username.removeAttribute('error');
        username.setAttribute('success', 'Username is available');
      }

      // Validate password
      if (!password.value || password.value.length < 8) {
        password.setAttribute('error', 'Password must be at least 8 characters');
        hasError = true;
      } else {
        password.removeAttribute('error');
        password.setAttribute('success', 'Strong password');
      }

      // Show status message
      if (hasError) {
        statusMessage.textContent = 'Please fix the errors above';
        statusMessage.className = 'status-message error show';
      } else {
        statusMessage.textContent = 'Form submitted successfully! âœ“';
        statusMessage.className = 'status-message success show';
        
        // Clear success message after 3 seconds
        setTimeout(() => {
          statusMessage.className = 'status-message';
        }, 3000);
      }
    });

    form.addEventListener('reset', () => {
      // Clear all error/success states
      const inputs = form.querySelectorAll('text-input-field');
      inputs.forEach(input => {
        input.removeAttribute('error');
        input.removeAttribute('success');
      });
      statusMessage.className = 'status-message';
    });

    // Test state functions
    window.showError = () => {
      const testInput = document.getElementById('test-input');
      testInput.setAttribute('error', 'This is an error message');
      testInput.removeAttribute('success');
    };

    window.showSuccess = () => {
      const testInput = document.getElementById('test-input');
      testInput.setAttribute('success', 'This is a success message');
      testInput.removeAttribute('error');
    };

    window.clearState = () => {
      const testInput = document.getElementById('test-input');
      testInput.removeAttribute('error');
      testInput.removeAttribute('success');
      testInput.value = '';
    };

    window.fillValue = () => {
      const testInput = document.getElementById('test-input');
      testInput.value = 'Pre-filled value';
      testInput.removeAttribute('error');
      testInput.removeAttribute('success');
    };

    // Add real-time validation feedback
    const usernameInput = document.getElementById('username');
    usernameInput.addEventListener('input', (e) => {
      const value = e.target.value;
      if (value.length > 0 && value.length < 3) {
        usernameInput.setAttribute('error', 'Username must be at least 3 characters');
      } else if (value.length >= 3) {
        usernameInput.removeAttribute('error');
      }
    });

    const passwordInput = document.getElementById('password');
    passwordInput.addEventListener('input', (e) => {
      const value = e.target.value;
      if (value.length > 0 && value.length < 8) {
        passwordInput.setAttribute('error', 'Password must be at least 8 characters');
      } else if (value.length >= 8) {
        passwordInput.removeAttribute('error');
      }
    });
  </script>
</body>
</html>
