<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TextInputField - Real Component with Icons</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 40px;
      font-size: 2rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .demo-card {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #1a202c;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e2e8f0;
    }

    .note {
      background: #e0f2fe;
      border-left: 4px solid #0284c7;
      padding: 16px;
      border-radius: 4px;
      margin-bottom: 30px;
      color: #075985;
    }

    .note strong {
      display: block;
      margin-bottom: 8px;
    }

    .state-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
    }

    .state-example {
      padding: 20px;
      background: #f7fafc;
      border-radius: 8px;
      border: 2px solid #e2e8f0;
    }

    .state-label {
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .input-wrapper {
      margin-bottom: 8px;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      background: #667eea;
      color: white;
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-1px);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âœ¨ Real TextInputField Component</h1>

    <div class="demo-card">
      <div class="note">
        <strong>This is the REAL component!</strong>
        This demo uses the actual TextInputField web component with proper Feather icons from the Icon component.
        The icons are real SVG elements, not emoji placeholders.
      </div>

      <div class="section-title">Interactive Test</div>
      
      <div class="input-wrapper">
        <text-input-field
          id="test-input"
          label="Test Input"
          helper-text="Type something and test the buttons below">
        </text-input-field>
      </div>

      <div class="button-group">
        <button onclick="showError()">Show Error (X icon)</button>
        <button onclick="showSuccess()">Show Success (Check icon)</button>
        <button onclick="showInfo()">Show Info (Info icon)</button>
        <button onclick="clearState()">Clear State</button>
      </div>
    </div>

    <div class="demo-card">
      <div class="section-title">All States with Real Icons</div>
      
      <div class="state-grid">
        <!-- Error State -->
        <div class="state-example">
          <div class="state-label">Error State (X Icon)</div>
          <text-input-field
            label="Email Address"
            value="invalid-email"
            error-message="Please enter a valid email address">
          </text-input-field>
        </div>

        <!-- Success State -->
        <div class="state-example">
          <div class="state-label">Success State (Check Icon)</div>
          <text-input-field
            label="Username"
            value="john_doe"
            is-success="true"
            helper-text="Username is available!">
          </text-input-field>
        </div>

        <!-- Info Icon -->
        <div class="state-example">
          <div class="state-label">Info Icon</div>
          <text-input-field
            label="Password"
            type="password"
            show-info-icon="true"
            helper-text="Must be at least 8 characters">
          </text-input-field>
        </div>

        <!-- Default State -->
        <div class="state-example">
          <div class="state-label">Default State</div>
          <text-input-field
            label="Full Name"
            placeholder="Enter your name"
            helper-text="This will appear on your profile">
          </text-input-field>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Inline the Icon component code
    function loadIconSVG(name) {
      const iconContent = {
        'check': '<polyline points="20 6 9 17 4 12"></polyline>',
        'x': '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',
        'info': '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',
      };
      return iconContent[name] || '<circle cx="12" cy="12" r="10"></circle>';
    }

    function createIcon(props) {
      const { name, size = 24, color = 'inherit' } = props;
      const svgContent = loadIconSVG(name);
      const strokeColor = color === 'inherit' ? 'currentColor' : `var(--${color})`;
      
      return `<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" stroke="${strokeColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-${name}" aria-hidden="true">${svgContent}</svg>`;
    }

    // Inline the TextInputField component code
    function getInputState(value, isFocused, hasError, isSuccess, isDisabled, isReadOnly) {
      if (isDisabled) return 'disabled';
      if (isReadOnly) return 'readonly';
      if (hasError) return 'error';
      if (isSuccess) return 'success';
      if (isFocused) return 'focused';
      if (value.length > 0) return 'filled';
      return 'default';
    }

    class TextInputField extends HTMLElement {
      constructor() {
        super();
        this.shadow = this.attachShadow({ mode: 'open' });
      }

      static get observedAttributes() {
        return ['label', 'value', 'type', 'placeholder', 'helper-text', 'error-message', 'is-success', 'show-info-icon', 'disabled', 'read-only'];
      }

      connectedCallback() {
        this.render();
        this.attachEventListeners();
      }

      attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue && this.shadow) {
          this.render();
        }
      }

      render() {
        const label = this.getAttribute('label') || '';
        const value = this.getAttribute('value') || '';
        const type = this.getAttribute('type') || 'text';
        const placeholder = this.getAttribute('placeholder') || '';
        const helperText = this.getAttribute('helper-text') || '';
        const errorMessage = this.getAttribute('error-message') || '';
        const isSuccess = this.getAttribute('is-success') === 'true';
        const showInfoIcon = this.getAttribute('show-info-icon') === 'true';
        const disabled = this.hasAttribute('disabled');
        const readOnly = this.hasAttribute('read-only');

        const hasError = !!errorMessage;
        const isFocused = this.shadow.activeElement === this.shadow.querySelector('input');
        const state = getInputState(value, isFocused, hasError, isSuccess, disabled, readOnly);

        // Generate icon HTML
        let iconHTML = '';
        if (hasError) {
          iconHTML = createIcon({ name: 'x', size: 24, color: 'color-error' });
        } else if (isSuccess) {
          iconHTML = createIcon({ name: 'check', size: 24, color: 'color-success-strong' });
        } else if (showInfoIcon) {
          iconHTML = createIcon({ name: 'info', size: 24, color: 'color-text-subtle' });
        }

        this.shadow.innerHTML = `
          <style>
            :host {
              display: block;
              font-family: system-ui, -apple-system, sans-serif;
            }

            .input-container {
              position: relative;
              display: flex;
              align-items: center;
              min-height: 48px;
              background: #FFFFFF;
              border: 1px solid #D1D5DB;
              border-radius: 12px;
              padding: 8px 12px;
              transition: all 250ms cubic-bezier(0.4, 0.0, 0.2, 1.0);
            }

            .input-container.focused {
              border-color: #3B82F6;
              box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }

            .input-container.error {
              border-color: #EF4444;
              background: rgba(239, 68, 68, 0.05);
            }

            .input-container.success {
              border-color: #10B981;
            }

            .input-container.disabled {
              opacity: 0.5;
              cursor: not-allowed;
            }

            input {
              flex: 1;
              border: none;
              outline: none;
              background: transparent;
              font-size: 16px;
              line-height: 24px;
              color: #1a202c;
              padding: 4px 0;
            }

            input:disabled {
              cursor: not-allowed;
            }

            input::placeholder {
              color: transparent;
            }

            label {
              position: absolute;
              left: 12px;
              top: 50%;
              transform: translateY(-50%);
              font-size: 16px;
              line-height: 24px;
              font-weight: 500;
              color: #6B7280;
              pointer-events: none;
              transition: all 250ms cubic-bezier(0.4, 0.0, 0.2, 1.0);
              background: white;
              padding: 0 4px;
            }

            .input-container.focused label,
            .input-container.filled label {
              top: 0;
              font-size: 14px;
              line-height: 20px;
            }

            .input-container.focused label {
              color: #3B82F6;
            }

            .input-container.error label {
              color: #EF4444;
            }

            .input-container.success label {
              color: #10B981;
            }

            .icon-container {
              margin-left: 8px;
              display: flex;
              align-items: center;
              justify-content: center;
            }

            .icon-container svg {
              display: block;
            }

            .helper-text,
            .error-message {
              margin-top: 4px;
              font-size: 13px;
              line-height: 18px;
              color: #6B7280;
            }

            .error-message {
              color: #EF4444;
            }

            :host(:focus-within) .input-container {
              outline: 2px solid #3B82F6;
              outline-offset: 2px;
            }
          </style>

          <div class="input-container ${state}">
            <input
              type="${type}"
              value="${value}"
              placeholder="${placeholder}"
              ${disabled ? 'disabled' : ''}
              ${readOnly ? 'readonly' : ''}
              aria-label="${label}"
            />
            <label>${label}</label>
            ${iconHTML ? `<div class="icon-container">${iconHTML}</div>` : ''}
          </div>

          ${helperText ? `<div class="helper-text">${helperText}</div>` : ''}
          ${errorMessage ? `<div class="error-message">${errorMessage}</div>` : ''}
        `;
      }

      attachEventListeners() {
        const input = this.shadow.querySelector('input');
        if (input) {
          input.addEventListener('focus', () => this.render());
          input.addEventListener('blur', () => this.render());
          input.addEventListener('input', (e) => {
            this.setAttribute('value', e.target.value);
          });
        }
      }
    }

    // Register the custom element
    if (!customElements.get('text-input-field')) {
      customElements.define('text-input-field', TextInputField);
    }

    // Control functions
    function showError() {
      const input = document.getElementById('test-input');
      input.setAttribute('error-message', 'This field has an error');
      input.removeAttribute('is-success');
      input.removeAttribute('show-info-icon');
    }

    function showSuccess() {
      const input = document.getElementById('test-input');
      input.setAttribute('is-success', 'true');
      input.removeAttribute('error-message');
      input.removeAttribute('show-info-icon');
    }

    function showInfo() {
      const input = document.getElementById('test-input');
      input.setAttribute('show-info-icon', 'true');
      input.removeAttribute('error-message');
      input.removeAttribute('is-success');
    }

    function clearState() {
      const input = document.getElementById('test-input');
      input.removeAttribute('error-message');
      input.removeAttribute('is-success');
      input.removeAttribute('show-info-icon');
      input.setAttribute('value', '');
    }
  </script>
</body>
</html>
