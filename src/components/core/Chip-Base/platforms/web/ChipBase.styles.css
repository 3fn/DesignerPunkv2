/**
 * Chip-Base Component Styles for Web Platform
 * 
 * Token-based styling using CSS custom properties from the mathematical token system.
 * All values reference semantic or primitive tokens - zero hard-coded values.
 * 
 * Stemma System Naming: [Family]-[Type] = Chip-Base
 * Component Type: Primitive
 * 
 * Visual Specifications:
 * - Visual height: 32px (derived from padding + content)
 * - Tap area: 48px (tapAreaRecommended)
 * - Pill shape: radius.full
 * - Single size for simplicity
 * 
 * DesignerPunk Philosophy: NO DISABLED STATES
 * This component does not support disabled states. If an action is unavailable,
 * the component should not be rendered.
 * 
 * @module Chip-Base/platforms/web/styles
 * @see Requirements: 2.1-2.6, 3.1-3.4, 6.1, 6.4 in .kiro/specs/045-chip-base/requirements.md
 */

/* ==========================================================================
   Base Chip Styles
   ========================================================================== */

/**
 * Base chip element styling.
 * 
 * - Inline-flex layout for icon-text composition
 * - Token-based typography, spacing, and colors
 * - Pill shape with radius.full
 * - Smooth transitions for interaction states
 * - Expanded tap area via ::before pseudo-element
 * 
 * @see Requirements: 2.1-2.6 - Visual specifications
 */
.chip-base {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-grouped-tight); /* 4px icon-text spacing */
  
  /* Spacing - Uses logical properties for RTL support */
  /* @see Requirements: 6.4 - Logical properties for RTL */
  padding-block: var(--space-inset-075); /* 6px semantic token (inset.075) */
  padding-inline: var(--space-inset-150); /* 12px */
  
  /* Typography - buttonSm for chip labels */
  /* @see Requirements: 1.4 - typography.buttonSm */
  font-family: var(--typography-button-sm-font-family);
  font-size: var(--typography-button-sm-font-size);
  font-weight: var(--typography-button-sm-font-weight);
  line-height: var(--typography-button-sm-line-height);
  letter-spacing: var(--typography-button-sm-letter-spacing);
  
  /* Colors - Default state */
  /* @see Requirements: 3.1 - Default state colors */
  background-color: var(--color-structure-surface);
  color: var(--color-text-default);
  border: var(--border-default) solid var(--color-structure-border);
  
  /* Shape - Pill with radius.full */
  /* @see Requirements: 2.4 - Pill shape */
  border-radius: var(--radius-full);
  
  /* Interaction */
  cursor: pointer;
  user-select: none;
  
  /* Transitions - Uses motion.duration.fast for state changes */
  /* @see Requirements: 3.4 - Animate using motion.duration.fast */
  transition: background-color var(--motion-duration-fast) var(--motion-easing-standard),
              border-color var(--motion-duration-fast) var(--motion-easing-standard),
              color var(--motion-duration-fast) var(--motion-easing-standard),
              box-shadow var(--motion-duration-fast) var(--motion-easing-standard);
  
  /* Remove default button styles */
  outline: none;
  
  /* Position relative for expanded tap area */
  position: relative;
  
  /* Ensure chip doesn't shrink in flex containers */
  flex-shrink: 0;
}

/* ==========================================================================
   Expanded Tap Area
   ========================================================================== */

/**
 * Expanded tap area via ::before pseudo-element.
 * 
 * Creates a 48px tap area while maintaining 32px visual height.
 * The pseudo-element extends beyond the visual bounds to capture taps.
 * 
 * Calculation: (48px tap area - 32px visual height) / 2 = 8px extension each side
 * 
 * @see Requirements: 2.6 - 48px tap area (tapAreaRecommended)
 * @see Requirements: 7.6 - Minimum 48px tap area (exceeds WCAG 44px)
 */
.chip-base::before {
  content: '';
  position: absolute;
  /* Extend 8px in each direction to achieve 48px tap area */
  /* Using calc() with token reference for maintainability */
  inset: calc((var(--tap-area-recommended) - 32px) / -2);
  /* Ensure pseudo-element doesn't interfere with visual styling */
  pointer-events: auto;
}

/* ==========================================================================
   Icon Styling
   ========================================================================== */

/**
 * Icon container styling.
 * 
 * - Flexbox for centering
 * - Inherits color from chip
 * - Marked as decorative (aria-hidden in HTML)
 * 
 * @see Requirements: 1.2 - Icon before label using Icon-Base at icon.size075
 */
.chip-base__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: inherit;
}

/* ==========================================================================
   Label Styling
   ========================================================================== */

/**
 * Label text styling.
 * 
 * - Single line with ellipsis truncation for long labels
 * - Inherits typography from parent
 * 
 * @see Requirements: 1.1 - Display label text
 */
.chip-base__label {
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* ==========================================================================
   Interaction States
   ========================================================================== */

/**
 * Hover state (web only).
 * 
 * Uses blend utility calculated color (darkerBlend with blend.hoverDarker)
 * applied to color.structure.surface for theme-aware state styling.
 * 
 * The --_chip-hover-bg custom property is set by the component
 * using darkerBlend(color.structure.surface, blend.hoverDarker) = 8% darker.
 * 
 * @see Requirements: 3.2 - Hover uses blend.hoverDarker on background
 */
.chip-base:hover {
  background-color: var(--_chip-hover-bg);
  border-color: var(--color-action-primary);
}

/**
 * Pressed/Active state.
 * 
 * Uses blend utility calculated color (darkerBlend with blend.pressedDarker)
 * applied to color.structure.surface for theme-aware state styling.
 * 
 * The --_chip-pressed-bg custom property is set by the component
 * using darkerBlend(color.structure.surface, blend.pressedDarker) = 12% darker.
 * 
 * @see Requirements: 3.3 - Pressed uses blend.pressedDarker on background
 */
.chip-base:active {
  background-color: var(--_chip-pressed-bg);
  border-color: var(--color-action-primary);
}

/* ==========================================================================
   Focus State (Accessibility)
   ========================================================================== */

/**
 * Focus state (keyboard navigation only).
 * 
 * - Uses :focus-visible for keyboard-only focus indicators
 * - Outline: accessibility.focus.width (2px)
 * - Color: accessibility.focus.color (primary)
 * - Offset: accessibility.focus.offset (2px)
 * - Meets WCAG 2.1 AA contrast requirements (3:1 minimum)
 * 
 * @see Requirements: 7.2 - Visible focus indicator using accessibility tokens
 */
.chip-base:focus-visible {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color);
  outline-offset: var(--accessibility-focus-offset);
}

/**
 * Remove focus outline on mouse click.
 * 
 * :focus-visible handles this automatically in modern browsers,
 * but this provides fallback for older browsers.
 */
.chip-base:focus:not(:focus-visible) {
  outline: none;
}

/* ==========================================================================
   High Contrast Mode Support
   ========================================================================== */

/**
 * Ensure chips remain visible in Windows High Contrast Mode.
 * 
 * - Force borders for visibility
 * - Ensure focus indicators are visible
 */
@media (prefers-contrast: high) {
  .chip-base {
    border: var(--border-emphasis) solid currentColor; /* 2px */
  }
  
  .chip-base:focus-visible {
    outline-width: var(--border-heavy); /* 4px */
  }
}

/* ==========================================================================
   Reduced Motion Support
   ========================================================================== */

/**
 * Respect user preference for reduced motion.
 * 
 * - Remove transitions and animations
 * - Maintain functionality without motion
 */
@media (prefers-reduced-motion: reduce) {
  .chip-base {
    transition: none;
  }
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

/**
 * Optimize chip appearance for print.
 * 
 * - Remove interactive states
 * - Ensure text is visible
 * - Simplify visual styling
 */
@media print {
  .chip-base {
    background-color: transparent !important;
    color: var(--color-print-default) !important;
    border: var(--border-default) solid var(--color-print-default) !important;
    box-shadow: none !important;
  }
  
  .chip-base__icon {
    display: none;
  }
}
