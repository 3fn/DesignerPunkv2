# Button-CTA Component Schema
#
# Stemma System: Buttons Family
# Component Type: Standalone (no behavioral variants)
# Naming Convention: [Family]-[Type] = Button-CTA
#
# This schema defines the behavioral contracts and properties for the
# Button-CTA component, which serves as the call-to-action button in
# the Buttons family. Styling variations (primary, secondary, tertiary)
# are handled via the `variant` prop, not separate components.
#
# Rationale: Button-CTA has no behavioral variants - only styling props.
# The `-Primary` suffix was misleading as it implied other behavioral
# variants exist. The `variant` prop handles primary/secondary/tertiary styling.

name: Button-CTA
type: standalone
family: Buttons
version: "1.1.0"
readiness: production-ready

# Component description
description: |
  Call-to-action button component with three size variants, three visual
  variants (via `variant` prop), and comprehensive interaction states. 
  Follows True Native Architecture with build-time platform separation. 
  Provides visual emphasis for user actions through styling props.

# Reusable behaviors this component implements
behaviors:
  - focusable
  - pressable
  - accessible
  - stateful

# Component properties (public API)
properties:
  label:
    type: string
    required: true
    description: |
      Button text label. Should be concise and action-oriented (e.g., "Save", 
      "Cancel", "Get Started"). Text wraps by default to support internationalization.
  
  size:
    type: "'small' | 'medium' | 'large'"
    required: false
    default: "'medium'"
    description: |
      Button size variant controlling height, padding, typography, and icon size.
      - small: 40px height (44px touch target on mobile), compact spacing
      - medium: 48px height, balanced spacing (default)
      - large: 56px height, generous spacing for high-emphasis actions
  
  variant:
    type: "'primary' | 'secondary' | 'tertiary'"
    required: false
    default: "'primary'"
    description: |
      Button visual variant establishing hierarchy through visual weight.
      - primary: Filled background with primary color (highest emphasis)
      - secondary: Outlined with primary color border (medium emphasis)
      - tertiary: Text-only with primary color (lowest emphasis)
  
  icon:
    type: IconName
    required: false
    description: |
      Optional leading icon from Icon System. Icon size is automatically
      determined by button size (small/medium: 24px, large: 32px).
      Icons use optical weight compensation for visual balance.
  
  noWrap:
    type: boolean
    required: false
    default: false
    description: |
      When true, text is truncated with ellipsis instead of wrapping.
      Default (false) allows text wrapping for accessibility and i18n support.
  
  disabled:
    type: boolean
    required: false
    default: false
    description: |
      When true, button is non-interactive with disabled visual styling.
      Disabled buttons are not keyboard focusable and onPress is not called.
  
  onPress:
    type: "() => void"
    required: true
    description: |
      Callback function invoked when button is clicked, tapped, or activated
      via keyboard (Enter/Space). Not called when disabled.
  
  testID:
    type: string
    required: false
    description: |
      Test identifier for automated testing. Maps to platform-specific attributes:
      - Web: data-testid
      - iOS: accessibilityIdentifier
      - Android: testTag


# Behavioral contracts - guarantees this component provides
# These 7 contracts define the foundational behaviors for CTA buttons
contracts:
  focusable:
    description: Can receive keyboard focus
    behavior: |
      Component can receive focus via Tab key navigation.
      Focus state is visually indicated with a focus ring.
      Focus is managed appropriately when disabled state changes.
    wcag: "2.1.1 Keyboard, 2.4.7 Focus Visible"
    platforms: [web, ios, android]
    validation: |
      - Tab key moves focus to button
      - Focus state is visually distinct with focus ring
      - Focus ring meets 3:1 contrast ratio
      - Disabled buttons are not focusable
  
  pressable:
    description: Responds to press/click events
    behavior: |
      Component responds to click, tap, Enter key, and Space key.
      Press triggers the onPress callback when not disabled.
      Platform-appropriate feedback is provided during press.
    wcag: "2.1.1 Keyboard"
    platforms: [web, ios, android]
    validation: |
      - Click/tap triggers onPress callback
      - Enter key triggers onPress callback
      - Space key triggers onPress callback
      - onPress not called when disabled
  
  hover_state:
    description: Visual feedback on hover (desktop only)
    behavior: |
      On desktop platforms, component shows visual feedback when mouse
      hovers over the button. Uses blend.hoverDarker token (8% darker)
      for primary variant background color change.
    wcag: "1.4.13 Content on Hover or Focus"
    platforms: [web]
    validation: |
      - Background color changes on mouse enter
      - Background color reverts on mouse leave
      - Hover state uses blend.hoverDarker token
      - Hover state not shown when disabled
  
  pressed_state:
    description: Visual feedback when pressed
    behavior: |
      Component shows visual feedback during active press/click.
      Uses blend.pressedDarker token (12% darker) for primary variant.
      Platform-specific feedback patterns:
      - Web: Background color change
      - iOS: Scale animation with haptic feedback
      - Android: Ripple effect with haptic feedback
    wcag: "2.4.7 Focus Visible"
    platforms: [web, ios, android]
    validation: |
      - Visual feedback shown during press
      - Feedback uses blend.pressedDarker token
      - Platform-appropriate animation/effect applied
      - Pressed state not shown when disabled
  
  disabled_state:
    description: Prevents interaction when disabled
    behavior: |
      When disabled, component:
      - Cannot receive focus
      - Cannot be clicked/tapped
      - Uses desaturated colors (blend.disabledDesaturate - 12% less saturated)
      - Shows cursor: not-allowed (web)
      - Communicates disabled state to assistive technology
    wcag: "4.1.2 Name, Role, Value"
    platforms: [web, ios, android]
    validation: |
      - Button cannot receive focus when disabled
      - onPress not called when disabled
      - Visual styling indicates disabled state
      - aria-disabled="true" set (web)
      - Disabled state announced to screen readers
  
  loading_state:
    description: Shows loading indicator during async operations
    behavior: |
      When in loading state, component:
      - Shows loading spinner replacing or alongside label
      - Prevents interaction (similar to disabled)
      - Maintains button dimensions to prevent layout shift
      - Communicates loading state to assistive technology
    wcag: "4.1.3 Status Messages"
    platforms: [web, ios, android]
    validation: |
      - Loading spinner displayed
      - Interaction prevented during loading
      - Button dimensions maintained
      - Loading state announced to screen readers
  
  focus_ring:
    description: WCAG 2.4.7 focus visible indicator
    behavior: |
      When focused via keyboard, component displays:
      - 2px focus ring (accessibility.focus.width)
      - 2px offset (accessibility.focus.offset)
      - Primary color (accessibility.focus.color)
      Focus ring visible in all visual variants (primary, secondary, tertiary).
      Uses :focus-visible (web) for keyboard-only focus indication.
    wcag: "2.4.7 Focus Visible"
    platforms: [web, ios, android]
    validation: |
      - Focus ring appears on keyboard focus
      - Focus ring meets 3:1 contrast ratio
      - Focus ring visible in all visual variants
      - Focus ring uses :focus-visible for keyboard-only (web)

# Design tokens this component requires
tokens:
  typography:
    - typography.button.small
    - typography.button.medium
    - typography.button.large
    - typography.labelMd
    - typography.labelLg
  color:
    - color.primary
    - color.contrast.onPrimary
    - color.text.primary
    - color.background
    - color.border
  spacing:
    - space.inset.100
    - space.inset.150
    - space.inset.200
    - space.inline.100
  motion:
    - motion.button.press
    - motion.button.hover
  border:
    - border.button.default
    - radius.100
    - radius.150
  accessibility:
    - accessibility.tapArea.recommended
    - accessibility.focus.width
    - accessibility.focus.offset
    - accessibility.focus.color
  icon:
    - icon.size100
    - icon.size125
  blend:
    - blend.hoverDarker
    - blend.pressedDarker
    - blend.disabledDesaturate
    - blend.iconLighter
  component:
    - buttonCTA.minWidth.small
    - buttonCTA.minWidth.medium
    - buttonCTA.minWidth.large

# Supported platforms
platforms:
  - web
  - ios
  - android

# Platform-specific implementation notes
platform_notes:
  web:
    element: "<button-cta>"
    implementation: Web Component with Shadow DOM
    file: platforms/web/ButtonCTA.web.ts
    notes: |
      - Uses semantic <button> element for accessibility
      - Shadow DOM for style encapsulation
      - CSS custom properties for token consumption
  ios:
    implementation: SwiftUI View
    file: platforms/ios/ButtonCTA.ios.swift
    notes: |
      - Uses SwiftUI Button with custom styling
      - Haptic feedback via UIImpactFeedbackGenerator
      - Scale animation on press
      - Safe area handling for edge-to-edge layouts
  android:
    implementation: Jetpack Compose Composable
    file: platforms/android/ButtonCTA.android.kt
    notes: |
      - Uses Compose Button with custom styling
      - Haptic feedback via HapticFeedback
      - Ripple effect on press
      - Material Design integration

# Size variant specifications
size_variants:
  small:
    height: 40
    touch_target: 44
    min_width: 56
    typography: labelMd
    icon_size: 24
    padding_horizontal: 16
    padding_vertical: 8
  medium:
    height: 48
    touch_target: 48
    min_width: 72
    typography: labelMd
    icon_size: 24
    padding_horizontal: 20
    padding_vertical: 12
  large:
    height: 56
    touch_target: 56
    min_width: 80
    typography: labelLg
    icon_size: 32
    padding_horizontal: 24
    padding_vertical: 16

# Visual variant specifications
visual_variants:
  primary:
    background: color.primary
    text: color.contrast.onPrimary
    border: none
    emphasis: highest
  secondary:
    background: color.background
    text: color.primary
    border: 1px color.primary
    emphasis: medium
  tertiary:
    background: transparent
    text: color.primary
    border: none
    emphasis: lowest

# Accessibility compliance
accessibility:
  wcag_level: AA
  compliance:
    - "1.4.1 Use of Color - Visual variants use shape/border, not just color"
    - "1.4.3 Contrast (Minimum) - All text meets 4.5:1 contrast"
    - "1.4.11 Non-text Contrast - Focus ring meets 3:1 contrast"
    - "2.1.1 Keyboard - Fully keyboard accessible (Tab, Enter, Space)"
    - "2.4.7 Focus Visible - Clear focus indicator with :focus-visible"
    - "4.1.2 Name, Role, Value - Proper ARIA attributes and disabled state"
    - "2.5.5 Target Size - Touch targets meet 44px minimum"
  aria_attributes:
    - role: button (implicit from semantic element)
    - aria-disabled: true when disabled
    - aria-label: label prop value
  keyboard_navigation:
    - Tab: Move focus to/from button
    - Enter: Activate button
    - Space: Activate button
