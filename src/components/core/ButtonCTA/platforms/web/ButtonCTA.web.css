/**
 * ButtonCTA Component Styles for Web Platform
 * 
 * Token-based styling using CSS custom properties from the mathematical token system.
 * All values reference semantic or primitive tokens - zero hard-coded values.
 * 
 * @module ButtonCTA/platforms/web/styles
 */

/* ==========================================================================
   Base Button Styles
   ========================================================================== */

/**
 * Base button element styling.
 * 
 * - Flexbox layout for icon-text composition
 * - Token-based typography, spacing, and colors
 * - Semantic button element with proper cursor
 * - Smooth transitions for interaction states
 */
.button-cta {
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-grouped-normal); /* Default icon-text spacing: 8px */
  
  /* Typography - Default to medium size (labelMd for UI controls) */
  font-family: var(--typography-label-md-font-family);
  font-size: var(--typography-label-md-font-size);
  font-weight: var(--typography-label-md-font-weight);
  line-height: var(--typography-label-md-line-height);
  letter-spacing: var(--typography-label-md-letter-spacing);
  
  /* Text alignment */
  text-align: center;
  text-decoration: none;
  
  /* Interaction */
  cursor: pointer;
  user-select: none;
  
  /* Transitions */
  transition: background-color var(--duration-150) ease-in-out,
              border-color var(--duration-150) ease-in-out,
              color var(--duration-150) ease-in-out,
              opacity var(--duration-150) ease-in-out,
              box-shadow var(--duration-150) ease-in-out;
  
  /* Remove default button styles */
  border: none;
  outline: none;
  background: none;
  
  /* Ensure button doesn't shrink in flex containers */
  flex-shrink: 0;
}

/* ==========================================================================
   Size Variants
   ========================================================================== */

/**
 * Small button (40px calculated height)
 * 
 * - Min height: tapAreaMinimum (44px) for accessibility
 * - Calculated height: ~40px (padding + lineHeight)
 * - Horizontal padding: space.inset.200 (16px)
 * - Vertical padding: space.inset.100 (8px)
 * - Border radius: radius100 (8px)
 * - Typography: typography.labelMd (medium weight for UI controls)
 * - Icon size: icon.size100 (24px)
 * - Icon spacing: space.grouped.tight (4px)
 * - Min width: buttonCTA.minWidth.small (56px)
 */
.button-cta--small {
  min-height: var(--tap-area-minimum); /* 44px for accessibility */
  min-width: 56px; /* buttonCTA.minWidth.small */
  padding: var(--space-inset-100) var(--space-inset-200); /* 8px 16px */
  border-radius: var(--radius-100); /* 8px */
  gap: var(--space-grouped-tight); /* 4px for icon-text spacing */
  
  /* Typography: labelMd (medium weight for UI controls) */
  font-family: var(--typography-label-md-font-family);
  font-size: var(--typography-label-md-font-size);
  font-weight: var(--typography-label-md-font-weight);
  line-height: var(--typography-label-md-line-height);
  letter-spacing: var(--typography-label-md-letter-spacing);
}

/**
 * Medium button (48px calculated height) - Default size
 * 
 * - Min height: tapAreaRecommended (48px) for better usability
 * - Calculated height: ~48px (padding + lineHeight)
 * - Horizontal padding: space.inset.300 (24px)
 * - Vertical padding: space.inset.150 (12px)
 * - Border radius: radius150 (12px)
 * - Typography: typography.labelMd (medium weight for UI controls)
 * - Icon size: icon.size100 (24px)
 * - Icon spacing: space.grouped.normal (8px)
 * - Min width: buttonCTA.minWidth.medium (72px)
 */
.button-cta--medium {
  min-height: var(--tap-area-recommended); /* 48px for better usability */
  min-width: 72px; /* buttonCTA.minWidth.medium */
  padding: var(--space-inset-150) var(--space-inset-300); /* 12px 24px */
  border-radius: var(--radius-150); /* 12px */
  gap: var(--space-grouped-normal); /* 8px for icon-text spacing */
  
  /* Typography: labelMd (medium weight for UI controls) */
  font-family: var(--typography-label-md-font-family);
  font-size: var(--typography-label-md-font-size);
  font-weight: var(--typography-label-md-font-weight);
  line-height: var(--typography-label-md-line-height);
  letter-spacing: var(--typography-label-md-letter-spacing);
}

/**
 * Large button (56px calculated height)
 * 
 * - Min height: tapAreaComfortable (56px) for comfortable interaction
 * - Calculated height: ~56px (padding + lineHeight)
 * - Horizontal padding: space.inset.400 (32px)
 * - Vertical padding: space.inset.150 (12px)
 * - Border radius: radius200 (16px)
 * - Typography: typography.labelLg (medium weight for UI controls)
 * - Icon size: icon.size125 (32px)
 * - Icon spacing: space.grouped.normal (8px)
 * - Min width: buttonCTA.minWidth.large (80px)
 */
.button-cta--large {
  min-height: var(--tap-area-comfortable); /* 56px for comfortable interaction */
  min-width: 80px; /* buttonCTA.minWidth.large */
  padding: var(--space-inset-150) var(--space-inset-400); /* 12px 32px */
  border-radius: var(--radius-200); /* 16px */
  gap: var(--space-grouped-normal); /* 8px for icon-text spacing */
  
  /* Typography: labelLg (medium weight for UI controls) */
  font-family: var(--typography-label-lg-font-family);
  font-size: var(--typography-label-lg-font-size);
  font-weight: var(--typography-label-lg-font-weight);
  line-height: var(--typography-label-lg-line-height);
  letter-spacing: var(--typography-label-lg-letter-spacing);
}

/* ==========================================================================
   Style Variants
   ========================================================================== */

/**
 * Primary button style (filled background)
 * 
 * - Background: color.primary
 * - Text: color.text.onPrimary (white100)
 * - Border: none
 * - Highest visual emphasis
 */
.button-cta--primary {
  background-color: var(--color-primary);
  color: var(--color-text-on-primary);
  border: none;
}

/**
 * Secondary button style (outlined)
 * 
 * - Background: color.background
 * - Text: color.primary
 * - Border: border.borderDefault solid color.primary
 * - Medium visual emphasis
 */
.button-cta--secondary {
  background-color: var(--color-background);
  color: var(--color-primary);
  border: var(--border-border-default) solid var(--color-primary);
}

/**
 * Tertiary button style (text-only)
 * 
 * - Background: transparent
 * - Text: color.primary
 * - Border: none
 * - Lowest visual emphasis
 */
.button-cta--tertiary {
  background-color: transparent;
  color: var(--color-primary);
  border: none;
}

/* ==========================================================================
   Icon Styling
   ========================================================================== */

/**
 * Icon container styling.
 * 
 * - Flexbox for centering
 * - Inherits color from button
 * - Marked as decorative (aria-hidden)
 */
.button-cta__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: inherit;
}

/**
 * Icon optical balance for secondary and tertiary buttons.
 * 
 * Icons appear heavier than text at the same color due to stroke density.
 * Should use color.icon.opticalBalance blend token (8% lighter).
 * 
 * CSS Limitation: CSS doesn't support color blending directly via custom properties.
 * The blend token exists in the token system but cannot be applied in CSS without:
 * 1. Build-time color calculation (generate blended color values)
 * 2. CSS color-mix() function (limited browser support as of 2025)
 * 3. Filter approximation (current approach: brightness(1.08) ≈ 8% lighter)
 * 
 * Current approach: Use filter: brightness(1.08) as approximation of 8% lighter blend.
 * This is a close approximation but not identical to the blend token's color math.
 * 
 * Future improvement: Generate blended color values at build time and expose as
 * CSS custom properties (e.g., --color-icon-optical-balance-primary).
 */
.button-cta--secondary .button-cta__icon,
.button-cta--tertiary .button-cta__icon {
  filter: brightness(1.08); /* Approximates color.icon.opticalBalance (8% lighter) */
}

/* ==========================================================================
   Text Label Styling
   ========================================================================== */

/**
 * Text label with default wrapping behavior.
 * 
 * - Allows multi-line text (accessibility-first)
 * - Button height grows to accommodate wrapped text
 * - Maintains minimum height for all text lengths
 */
.button-cta__label {
  display: inline-block;
  white-space: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/**
 * Text label with no-wrap behavior (opt-in).
 * 
 * - Single-line text with ellipsis truncation
 * - Use for constrained spaces (toolbars, navigation)
 * - Accessibility trade-off: may hide content
 */
.button-cta__label--no-wrap {
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* ==========================================================================
   Interaction States
   ========================================================================== */

/**
 * Hover state (web only).
 * 
 * - Applies 8% opacity overlay (opacity.hover)
 * - Cursor changes to pointer
 * - Smooth transition
 */
.button-cta:hover:not(:disabled) {
  opacity: calc(1 - var(--opacity-100)); /* 100% - 8% = 92% */
}

/**
 * Pressed/Active state.
 * 
 * - Applies 16% opacity overlay (opacity.pressed)
 * - Visual feedback for click/tap
 */
.button-cta:active:not(:disabled) {
  opacity: calc(1 - var(--opacity-200)); /* 100% - 16% = 84% */
}

/**
 * Focus state (keyboard navigation only).
 * 
 * - Uses :focus-visible for keyboard-only focus indicators
 * - Outline: accessibility.focus.width (2px)
 * - Color: accessibility.focus.color (primary)
 * - Offset: accessibility.focus.offset (2px)
 * - Shadow: shadow.hover for elevation
 * - Meets WCAG 2.1 AA contrast requirements (3:1 minimum)
 */
.button-cta:focus-visible {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color);
  outline-offset: var(--accessibility-focus-offset);
  box-shadow: var(--shadow-hover);
}

/**
 * Remove focus outline on mouse click.
 * 
 * :focus-visible handles this automatically in modern browsers,
 * but this provides fallback for older browsers.
 */
.button-cta:focus:not(:focus-visible) {
  outline: none;
}

/**
 * Disabled state.
 * 
 * Should use blend.disabledDesaturate token (12% less saturated).
 * 
 * CSS Limitation: CSS doesn't support desaturation blending directly via custom properties.
 * The blend token exists in the token system but cannot be applied in CSS without:
 * 1. Build-time color calculation (generate desaturated color values)
 * 2. CSS filter: saturate() function (affects all colors, not just base color)
 * 3. Opacity approximation (current approach: opacity 0.6 ≈ muted appearance)
 * 
 * Current approach: Use opacity: 0.6 as approximation of desaturated appearance.
 * This is not identical to the blend token's desaturation math but provides
 * similar visual feedback for disabled state.
 * 
 * Future improvement: Generate desaturated color values at build time and expose as
 * CSS custom properties (e.g., --color-primary-disabled-desaturated).
 * 
 * - Cursor changes to not-allowed
 * - Prevents interaction
 * - Maintains color contrast for accessibility
 */
.button-cta:disabled,
.button-cta--disabled {
  opacity: 0.6; /* Approximates blend.disabledDesaturate (12% less saturated) */
  cursor: not-allowed;
  pointer-events: none;
}

/* ==========================================================================
   Responsive Behavior
   ========================================================================== */

/**
 * Ensure buttons adapt to container width when needed.
 * 
 * By default, buttons are inline-flex and size to content.
 * For full-width buttons, apply width: 100% via utility class or inline style.
 */
.button-cta--full-width {
  width: 100%;
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

/**
 * Optimize button appearance for print.
 * 
 * - Remove interactive states
 * - Ensure text is visible
 * - Simplify visual styling
 * - Use color.print.default token for print media
 */
@media print {
  .button-cta {
    background-color: transparent !important;
    color: var(--color-print-default) !important;
    border: var(--border-border-default) solid var(--color-print-default) !important;
    box-shadow: none !important;
  }
  
  .button-cta__icon {
    display: none;
  }
}

/* ==========================================================================
   High Contrast Mode Support
   ========================================================================== */

/**
 * Ensure buttons remain visible in Windows High Contrast Mode.
 * 
 * - Force borders for all button styles
 * - Ensure focus indicators are visible
 * - Use border.borderEmphasis (2px) and border.borderHeavy (4px) tokens
 */
@media (prefers-contrast: high) {
  .button-cta {
    border: var(--border-border-emphasis) solid currentColor; /* 2px */
  }
  
  .button-cta:focus-visible {
    outline-width: var(--border-border-heavy); /* 4px */
  }
}

/* ==========================================================================
   Reduced Motion Support
   ========================================================================== */

/**
 * Respect user preference for reduced motion.
 * 
 * - Remove transitions and animations
 * - Maintain functionality without motion
 */
@media (prefers-reduced-motion: reduce) {
  .button-cta {
    transition: none;
  }
}
