/**
 * Button-VerticalListItem Component Styles for Web Platform
 * 
 * Token-based styling using CSS custom properties from the mathematical token system.
 * All values reference semantic or primitive tokens - zero hard-coded values.
 * 
 * Stemma System Naming: [Family]-[Type] = Button-VerticalListItem
 * Component Type: Primitive (foundational component)
 * 
 * Key Design Decisions:
 * - CSS logical properties for RTL support (padding-block, padding-inline)
 * - Padding compensation for height stability (11px rest, 10px selected)
 * - Blend tokens for hover/pressed overlays
 * - Accessibility tokens for focus-visible outline
 * - No disabled state by design (unavailable options should be hidden)
 * 
 * @module Button-VerticalListItem/platforms/web/styles
 * @see Requirements: 5.1, 5.2, 5.3, 5.4, 8.1, 8.2, 8.3, 8.4
 */

/* ==========================================================================
   CSS Custom Properties (Token References)
   ========================================================================== */

/**
 * Component-level custom properties for token consumption.
 * These map semantic tokens to component-specific usage.
 * 
 * Component tokens are set inline via style attribute for state-specific values:
 * - --vlbi-background: Background color for current visual state
 * - --vlbi-border-width: Border width for current visual state
 * - --vlbi-border-color: Border color for current visual state
 * - --vlbi-padding-block: Padding block for current visual state (padding compensation)
 * - --vlbi-label-color: Label text color for current visual state
 * - --vlbi-icon-color: Icon color for current visual state
 */
:host {
  /* Display */
  display: block;
  width: 100%;
  
  /* Focus ring tokens */
  --vlbi-focus-offset: var(--accessibility-focus-offset);
  --vlbi-focus-width: var(--accessibility-focus-width);
  --vlbi-focus-color: var(--accessibility-focus-color);
  
  /* Sizing tokens */
  --vlbi-min-height: var(--accessibility-tap-area-recommended);
  --vlbi-radius: var(--radius-normal);
  --vlbi-padding-inline: var(--space-inset-200);
  --vlbi-gap: var(--space-grouped-loose);
  
  /* Typography tokens */
  --vlbi-label-font-size: var(--typography-button-md-font-size, 1rem);
  --vlbi-label-font-weight: var(--typography-button-md-font-weight, 500);
  --vlbi-label-line-height: var(--typography-button-md-line-height, 1.5);
  --vlbi-description-font-size: var(--typography-body-sm-font-size, 0.875rem);
  --vlbi-description-font-weight: var(--typography-body-sm-font-weight, 400);
  --vlbi-description-line-height: var(--typography-body-sm-line-height, 1.5);
  --vlbi-description-color: var(--color-text-muted);
  
  /* Transition tokens */
  --vlbi-transition-duration: 250ms;
  --vlbi-transition-easing: ease;
  
  /* Blend tokens for interactive states */
  --vlbi-hover-brightness: 0.95;
  --vlbi-pressed-brightness: 0.90;
}

/* ==========================================================================
   Base Button Styles
   ========================================================================== */

/**
 * Base button element styling.
 * 
 * - Flexbox layout for content alignment
 * - Token-based sizing and spacing
 * - CSS logical properties for RTL support
 * - Smooth transitions for interaction states
 * - Semantic button element with proper cursor
 * 
 * @see Requirements 5.1, 5.2, 5.3, 5.4
 */
.vertical-list-item {
  /* Reset browser defaults */
  appearance: none;
  margin: 0;
  font: inherit;
  
  /* Layout - flexbox for icon/content/checkmark alignment */
  display: flex;
  align-items: center;
  gap: var(--vlbi-gap);
  width: 100%;
  
  /* Sizing - minimum height for touch target */
  /* @see Requirement 5.1 */
  min-height: var(--vlbi-min-height);
  
  /* Spacing - CSS logical properties for RTL support */
  /* @see Requirement 11.1 */
  padding-block: var(--vlbi-padding-block);
  padding-inline: var(--vlbi-padding-inline);
  
  /* Visual - token-based styling */
  /* @see Requirement 5.3 */
  background: var(--vlbi-background);
  border: var(--vlbi-border-width) solid var(--vlbi-border-color);
  border-radius: var(--vlbi-radius);
  
  /* Typography */
  text-align: start;
  
  /* Interaction */
  cursor: pointer;
  
  /* Animation - smooth state transitions */
  /* @see Requirement 7.1 */
  transition: 
    background var(--vlbi-transition-duration) var(--vlbi-transition-easing),
    border-color var(--vlbi-transition-duration) var(--vlbi-transition-easing),
    border-width var(--vlbi-transition-duration) var(--vlbi-transition-easing),
    padding var(--vlbi-transition-duration) var(--vlbi-transition-easing),
    color var(--vlbi-transition-duration) var(--vlbi-transition-easing),
    filter var(--vlbi-transition-duration) var(--vlbi-transition-easing);
  
  /* Focus outline reset (custom focus ring implemented below) */
  outline: none;
}

/* ==========================================================================
   Interactive States - Hover
   ========================================================================== */

/**
 * Hover state styling.
 * 
 * Applies blend.hoverDarker overlay on top of current visual state.
 * Uses CSS filter brightness for cross-browser compatible blend effect.
 * 
 * @see Requirement 8.1
 */
.vertical-list-item:hover {
  /* Apply blend.hoverDarker (approximately 5% darker) via brightness filter */
  filter: brightness(var(--vlbi-hover-brightness));
}

/* ==========================================================================
   Interactive States - Pressed/Active
   ========================================================================== */

/**
 * Pressed/active state styling.
 * 
 * Applies blend.pressedDarker overlay on top of current visual state.
 * Uses CSS filter brightness for cross-browser compatible blend effect.
 * 
 * @see Requirement 8.2
 */
.vertical-list-item:active {
  /* Apply blend.pressedDarker (approximately 10% darker) via brightness filter */
  filter: brightness(var(--vlbi-pressed-brightness));
}

/* ==========================================================================
   Focus State
   ========================================================================== */

/**
 * Focus state (keyboard navigation only).
 * 
 * - Uses :focus-visible for keyboard-only focus indicators
 * - Outline: accessibility.focus.width
 * - Color: accessibility.focus.color
 * - Offset: accessibility.focus.offset
 * - Meets WCAG 2.1 AA contrast requirements (3:1 minimum)
 * 
 * @see Requirements 8.3, 8.4
 */
.vertical-list-item:focus-visible {
  outline: var(--vlbi-focus-width) solid var(--vlbi-focus-color);
  outline-offset: var(--vlbi-focus-offset);
}

/**
 * Remove focus outline on mouse click.
 * 
 * :focus-visible handles this automatically in modern browsers,
 * but this provides fallback for older browsers.
 * 
 * @see Requirement 8.4
 */
.vertical-list-item:focus:not(:focus-visible) {
  outline: none;
}

/* ==========================================================================
   Visual State Modifier Classes
   ========================================================================== */

/*
 * Visual State Modifier Classes
 * 
 * These classes are applied to the button element based on the current visual state.
 * The actual styling values are applied via inline CSS custom properties (--vlbi-*)
 * which are set dynamically based on the visual state mapping in visualStateMapping.ts.
 * 
 * This approach allows:
 * 1. Dynamic state-based styling without CSS class switching overhead
 * 2. Smooth CSS transitions between states
 * 3. Error state overlay without additional class complexity
 * 
 * The classes below serve as semantic markers for:
 * - Testing (can query by class to verify state)
 * - Debugging (visible in DevTools)
 * - Future extension (can add state-specific overrides if needed)
 * 
 * @see visualStateMapping.ts for the CSS variable values per state
 * @see Requirements 1.1, 1.2, 1.3, 1.4, 1.5, 3.1, 3.2, 3.3
 */

/* ==========================================================================
   Content Container Styling
   ========================================================================== */

/**
 * Content container (label + description).
 * 
 * - Flexbox column layout for stacking label and description
 * - Flex: 1 to fill available space between icons
 * - min-width: 0 to allow text truncation
 * 
 * @see Requirement 4.1, 4.2
 */
.vertical-list-item__content {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0; /* Allow text truncation */
}

/* ==========================================================================
   Label Styling
   ========================================================================== */

/**
 * Label text styling.
 * 
 * - Typography: typography.buttonMd
 * - Color: Inherits from visual state (via --vlbi-label-color)
 * - Truncation: Single line with ellipsis for overflow
 * 
 * @see Requirement 4.1
 */
.vertical-list-item__label {
  color: var(--vlbi-label-color);
  font-size: var(--vlbi-label-font-size);
  font-weight: var(--vlbi-label-font-weight);
  line-height: var(--vlbi-label-line-height);
  
  /* Text truncation for long labels */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ==========================================================================
   Description Styling
   ========================================================================== */

/**
 * Description text styling.
 * 
 * - Typography: typography.bodySm
 * - Color: color.text.muted (always, regardless of visual state)
 * - Wrapping: Allows multiple lines
 * 
 * @see Requirements 4.2, 4.3
 */
.vertical-list-item__description {
  color: var(--vlbi-description-color);
  font-size: var(--vlbi-description-font-size);
  font-weight: var(--vlbi-description-font-weight);
  line-height: var(--vlbi-description-line-height);
}

/* ==========================================================================
   Leading Icon Styling
   ========================================================================== */

/**
 * Leading icon container styling.
 * 
 * - Flex-shrink: 0 to prevent icon from shrinking
 * - Color: Passed directly to Icon-Base with optical balance applied via blend utilities
 * - Position: Far left, vertically centered (handled by parent flexbox)
 * 
 * Note: Optical balance (8% lighter) is applied at render time using the blend
 * utilities' iconColor() function, not via CSS filter. This ensures mathematical
 * consistency with the design system's color.icon.opticalBalance token.
 * 
 * @see Requirements 4.4, 4.5, 9.1
 */
.vertical-list-item__leading-icon {
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ==========================================================================
   Checkmark (Selection Indicator) Styling
   ========================================================================== */

/**
 * Checkmark container styling.
 * 
 * - Flex-shrink: 0 to prevent icon from shrinking
 * - Color: Inherits from visual state (via --vlbi-icon-color)
 * - Position: Far right, vertically centered (handled by parent flexbox)
 * - Marked as decorative (aria-hidden="true" in HTML)
 * 
 * @see Requirements 2.1, 2.2, 2.3, 2.4, 2.5
 */
.vertical-list-item__checkmark {
  flex-shrink: 0;
  color: var(--vlbi-icon-color);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/**
 * Checkmark fade transition.
 * 
 * Smooth opacity transition for checkmark visibility changes.
 * 
 * @see Requirement 7.2
 */
.vertical-list-item__checkmark--fade {
  transition: opacity var(--vlbi-transition-duration) var(--vlbi-transition-easing),
              visibility var(--vlbi-transition-duration) var(--vlbi-transition-easing);
}

/**
 * Checkmark instant transition.
 * 
 * No animation when hiding checkmark (instant hide).
 * 
 * @see Requirement 7.4
 */
.vertical-list-item__checkmark--instant {
  transition: none;
}

/**
 * Checkmark hidden state.
 * 
 * @see Requirement 2.2
 */
.vertical-list-item__checkmark--hidden {
  opacity: 0;
  visibility: hidden;
}

/**
 * Checkmark visible state.
 * 
 * @see Requirement 2.1
 */
.vertical-list-item__checkmark--visible {
  opacity: 1;
  visibility: visible;
}

/* ==========================================================================
   High Contrast Mode Support
   ========================================================================== */

/**
 * Ensure buttons remain visible in Windows High Contrast Mode.
 * 
 * - Force borders for all button styles
 * - Ensure focus indicators are visible
 * - Use border.borderEmphasis (2px) for visibility
 */
@media (prefers-contrast: high) {
  .vertical-list-item {
    border-width: 2px !important;
  }
  
  .vertical-list-item:focus-visible {
    outline-width: 4px; /* border.borderHeavy equivalent */
  }
}

/* ==========================================================================
   Reduced Motion Support
   ========================================================================== */

/**
 * Respect user preference for reduced motion.
 * 
 * - Remove transitions and animations
 * - Maintain functionality without motion
 * 
 * @see Requirement 7.1 (motion.selectionTransition)
 */
@media (prefers-reduced-motion: reduce) {
  .vertical-list-item,
  .vertical-list-item__checkmark--fade {
    transition: none;
  }
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

/**
 * Optimize button appearance for print.
 * 
 * - Remove interactive states
 * - Ensure visibility with border
 * - Simplify visual styling
 */
@media print {
  .vertical-list-item {
    background-color: transparent !important;
    border: 1px solid currentColor !important;
    filter: none !important;
  }
}
