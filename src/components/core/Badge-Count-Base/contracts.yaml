version: "1.0.0"
component: Badge-Count-Base
family: Badge

contracts:
  content_displays_count:
    category: content
    description: Shows numeric value
    behavior: |
      Badge-Count-Base renders the provided count value visibly within the badge.
      Text uses typography tokens based on size variant:
      - sm: typography.labelXs (13px, medium weight, 1.538 line-height)
      - md: typography.labelSm (14px, medium weight, 1.429 line-height)
      - lg: typography.labelMd (16px, medium weight, 1.5 line-height)
      Text color uses color.text.default token for consistent theming.
      Count is displayed as-is unless it exceeds max value.
    wcag: "1.3.1 Info and Relationships"
    platforms: [web, ios, android]
    validation:
      - Count value is visible in the rendered badge
      - Typography matches size variant specification
      - Text color uses design token, not hardcoded value
      - Font weight is medium (500)
    test_approach: |
      Render badge with count prop. Verify text content matches count value,
      computed font-size matches size variant, and text is visible.
    required: true

  content_truncates_at_max:
    category: content
    description: Shows "[max]+" when count exceeds max
    behavior: |
      When count exceeds the max value (default: 99), displays "[max]+"
      instead of the actual count. Examples:
      - count=100, max=99 → "99+"
      - count=50, max=99 → "50"
      - count=99, max=99 → "99" (exact match shows value)
    wcag: "1.3.1 Info and Relationships"
    platforms: [web, ios, android]
    validation:
      - Count at or below max displays exact value
      - Count above max displays "[max]+"
      - Plus sign (+) appears after max value
      - Custom max values are respected
    test_approach: |
      Render with count=50/max=99 → "50". Render with count=100/max=99 → "99+".
      Render with count=99/max=99 → "99" (not "99+").
    required: true

  visual_circular_shape:
    category: visual
    description: Renders circular for single-digit counts
    behavior: |
      When displaying a single digit (1-9), renders as a circle by setting
      min-width equal to line-height:
      - sm: 16px (line-height-050)
      - md: 20px (line-height-075)
      - lg: 24px (line-height-100)
      Combined with radiusHalf (50%), creates a perfect circle.
      Zero (0) also renders as circular when showZero=true.
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Single-digit counts render as circular shape
      - Width equals height for single digits
      - Text is centered within the circle
      - radiusHalf (50%) applied for circular appearance
    test_approach: |
      Render with count=5. Verify min-width equals line-height for size,
      border-radius is 50%, and text is centered.
    required: true

  visual_pill_shape:
    category: visual
    description: Renders pill shape for multi-digit counts
    behavior: |
      When displaying multi-digit counts (10+) or overflow text ("99+"),
      expands horizontally with padding to create a pill shape.
      radiusHalf (50%) creates rounded ends. Shape transitions:
      - 1-9: Circular (width = height)
      - 10-99: Pill (width > height)
      - 100+ (or >max): Pill with "[max]+" text
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Multi-digit counts render as pill shape
      - Width exceeds height for multi-digit counts
      - Rounded ends maintained via radiusHalf
      - Horizontal padding applied
    test_approach: |
      Render with count=50. Verify width exceeds min-width and border-radius
      is 50%. Render with count=100/max=99 → pill with "99+".
    required: true

  accessibility_non_interactive:
    category: accessibility
    description: Does not respond to user interaction
    behavior: |
      Badge-Count-Base is read-only and non-interactive:
      - Not focusable via keyboard navigation (no tabindex)
      - Does not respond to click, tap, or keyboard events
      - No hover or press visual feedback
      - pointer-events: none (web)
      - No gesture handlers (native)
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Badge cannot receive keyboard focus
      - Click/tap events do not trigger any action
      - No visual feedback on hover or press
      - Badge is not in accessibility focus order
      - pointer-events is none (web)
    test_approach: |
      Attempt to focus via Tab key — verify no focus. Click badge — verify
      no event handlers fire. Verify pointer-events: none (web).
    required: true

  accessibility_color_contrast:
    category: accessibility
    description: Meets WCAG AA contrast requirements (4.5:1)
    behavior: |
      Uses design tokens ensuring WCAG AA compliance:
      - Text color (color.text.default) on background (color.surface)
      - Contrast ratio meets or exceeds 4.5:1 for normal text
      High contrast mode support via CSS media query (web).
    wcag: "1.4.3 Contrast (Minimum)"
    platforms: [web, ios, android]
    validation:
      - Text/background contrast ratio >= 4.5:1
      - Colors use design tokens, not hardcoded values
      - High contrast mode applies border for visibility (web)
    test_approach: |
      Calculate contrast ratio between text and background colors.
      Verify >= 4.5:1. Test with prefers-contrast: high (web).
    required: true

  accessibility_text_scaling:
    category: accessibility
    description: Scales proportionally with user font size preferences
    behavior: |
      Respects user font size preferences:
      - Web: Uses relative units (rem-based tokens) that scale with root font size
      - iOS: Respects Dynamic Type settings
      - Android: Respects system font scale settings
      Badge dimensions scale proportionally without content clipping.
    wcag: "1.4.4 Resize Text"
    platforms: [web, ios, android]
    validation:
      - Badge scales when user increases system font size to 200%
      - Content remains visible without clipping
      - Layout maintains integrity at larger sizes
    test_approach: |
      Set root font-size to 200% (web). Verify badge dimensions scale
      proportionally and text remains visible without clipping.
    required: true

excludes:
  interaction_focusable:
    reason: "Badges are visual indicators, not interactive elements. Making them focusable would create confusing UX."
    category: interaction
    reference: "contracts.yaml accessibility_non_interactive contract; 062 audit intentional-exclusions.md"
  interaction_pressable:
    reason: "Badges are visual indicators, not interactive elements."
    category: interaction
    reference: "contracts.yaml accessibility_non_interactive contract; 062 audit intentional-exclusions.md"
  interaction_hover:
    reason: "Badges are visual indicators — no hover feedback expected."
    category: interaction
    reference: "contracts.yaml accessibility_non_interactive contract; 062 audit intentional-exclusions.md"
  interaction_pressed:
    reason: "Badges are visual indicators — no press feedback expected."
    category: interaction
    reference: "contracts.yaml accessibility_non_interactive contract; 062 audit intentional-exclusions.md"
