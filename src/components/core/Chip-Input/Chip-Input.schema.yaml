# Chip-Input Component Schema
#
# Stemma System: Chip Family
# Component Type: Semantic Variant
# Inherits: Chip-Base
# Naming Convention: [Family]-[Type]-[Variant] = Chip-Input
#
# This schema defines the behavioral contracts and properties for the
# Chip-Input component, which extends Chip-Base with dismiss behavior
# for managing user-entered values like tags or selections.
#
# Rationale: Chip-Input is a semantic variant that provides dismissible
# chips for user-entered values. It always displays an X icon as a trailing
# element and dismisses when tapped anywhere on the chip. This simplifies
# the hit area and provides faster interaction for users.
#
# DesignerPunk Philosophy: NO DISABLED STATES
# This component does not support disabled states. If dismissal is unavailable,
# the component should not be rendered. This ensures users always see actionable
# UI elements.

name: Chip-Input
type: semantic
family: Chip
version: "1.0.0"
readiness: production-ready

# Inheritance declaration
inherits: Chip-Base

# Component description
description: |
  Dismissible chip for managing user-entered values like tags or selections.
  Extends Chip-Base with dismiss behavior and trailing X icon.
  
  Key Characteristics:
  - Dismissible: Tap anywhere on chip to dismiss
  - X icon: Always displays trailing X icon as visual affordance
  - Dual icons: Supports both leading icon AND trailing X icon
  - Accessible: X icon has accessible label "Remove [label]"
  
  Chip-Input inherits Chip-Base styling but modifies behavior:
  - Replaces onPress with onDismiss callback
  - Always renders X icon as trailing element
  - Tap anywhere dismisses (not just X icon)
  
  Design Decision: Tap anywhere to dismiss (not X-only) simplifies hit area
  and provides faster interaction. The X icon is a visual affordance, not
  a separate tap target.
  
  DesignerPunk Philosophy: NO DISABLED STATES
  If dismissal is unavailable, the component should not be rendered.

# Reusable behaviors this component implements (inherited + new)
behaviors:
  - renderable
  - pressable
  - focusable
  - accessible
  - dismissible

# Component properties (public API)
# Note: Inherits label, icon, testID from Chip-Base
# Note: onPress is NOT inherited - replaced by onDismiss
properties:
  onDismiss:
    type: "() => void"
    required: false
    description: |
      Called when chip is dismissed (tap anywhere on chip).
      
      Invoked on:
      - Mouse click anywhere on chip (web)
      - Touch tap anywhere on chip (all platforms)
      - Keyboard Enter or Space when focused (web)
      
      When not provided, chip is display-only but X icon is still visible.
      
      Example: onDismiss={() => setTags(tags.filter(t => t.id !== tag.id))}

# Behavioral contracts moved to contracts.yaml
# Design tokens this component requires
# Note: Inherits all tokens from Chip-Base
tokens:
  inherited:
    - chip.paddingBlock
    - typography.buttonSm
    - color.structure.surface
    - color.structure.border
    - color.text.default
    - color.action.primary
    - space.inset.150
    - space.grouped.tight
    - borderDefault
    - radius.full
    - motion.selectionTransition
    - blend.hoverDarker
    - blend.pressedDarker
    - tapAreaRecommended
    - accessibility.focus.width
    - accessibility.focus.offset
    - accessibility.focus.color
    - icon.size075

# Supported platforms
platforms:
  - web
  - ios
  - android

# Platform-specific implementation notes
platform_notes:
  web:
    element: "<chip-input>"
    implementation: Web Component with Shadow DOM
    file: platforms/web/ChipInput.web.ts
    notes: |
      - Extends ChipBaseElement behavior (composition pattern)
      - Uses Shadow DOM for style encapsulation
      - X icon rendered via Icon-Base web component with aria-label
      - Supports both leading icon and trailing X icon
      - Click anywhere triggers onDismiss callback
  ios:
    implementation: SwiftUI View
    file: platforms/ios/ChipInput.swift
    notes: |
      - Uses SwiftUI Button with custom styling
      - Token consumption via DesignTokens constants
      - X icon via IconBase component with accessibilityLabel
      - HStack layout for [icon] [label] [X icon]
  android:
    implementation: Jetpack Compose Composable
    file: platforms/android/ChipInput.android.kt
    notes: |
      - Uses Compose Surface with onClick handler
      - Token consumption via DesignTokens object
      - X icon via IconBase composable with contentDescription
      - Row layout for [icon] [label] [X icon]

# Accessibility compliance
accessibility:
  wcag_level: AA
  compliance:
    - "1.4.3 Contrast (Minimum) - Text meets 4.5:1 contrast ratio"
    - "1.4.11 Non-text Contrast - Border and X icon meet 3:1 contrast"
    - "2.1.1 Keyboard - Fully keyboard accessible (Tab, Enter, Space)"
    - "2.4.7 Focus Visible - Clear focus indicator with :focus-visible"
    - "2.5.5 Target Size - 48px tap area exceeds 44px minimum"
    - "4.1.2 Name, Role, Value - X icon has accessible label"
  aria_attributes:
    - role: button
    - tabindex: "0"
  keyboard_navigation:
    - Tab: Move focus to/from chip
    - Enter: Dismiss chip (call onDismiss)
    - Space: Dismiss chip (call onDismiss)
  platform_accessibility:
    web: "role='button', tabindex='0', X icon aria-label='Remove [label]'"
    ios: "Button accessibility trait, X icon accessibilityLabel"
    android: "Button semantics, X icon contentDescription"
