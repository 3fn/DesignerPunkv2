version: "1.0.0"
component: Progress-Stepper-Base
family: Progress-Indicator

contracts:
  composition_node_and_connector:
    category: composition
    description: Renders Node-Base and Connector-Base primitives (no labels)
    behavior: |
      Composes Progress-Indicator-Node-Base for each step and
      Progress-Indicator-Connector-Base between all adjacent nodes (n-1
      connectors for n nodes). Does NOT render Label-Base.
      Completed nodes receive content='checkmark', others content='none'.
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Renders Node-Base for each step
      - Renders Connector-Base between all adjacent nodes
      - No Label-Base elements present
      - Completed nodes have content='checkmark'
      - Non-completed nodes have content='none'
    test_approach: |
      Render stepper with 4 steps, currentStep=2. Verify 4 nodes, 3 connectors,
      no labels. Verify completed node has checkmark.
    required: true

  state_priority_derivation:
    category: state
    description: Derives state with priority error > completed > current > incomplete
    behavior: |
      State derivation uses priority logic:
      1. error: step index in errorSteps (highest priority)
      2. completed: step index < currentStep and not in errorSteps
      3. current: step index === currentStep and not in errorSteps
      4. incomplete: step index > currentStep
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Error steps override all other states
      - Steps before currentStep are completed (unless error)
      - Exactly one step is current (unless in errorSteps)
      - Steps after currentStep are incomplete
    test_approach: |
      Render with currentStep=2, errorSteps=[1]. Verify step 1 is error
      (not completed), step 2 is current, step 3+ incomplete.
    required: true

  state_connector_derivation:
    category: state
    description: Connectors are active between completed nodes, inactive otherwise
    behavior: |
      Connector state derived from adjacent node states:
      - active: both left and right nodes are completed
      - inactive: any other combination
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Connectors between completed nodes are active
      - All other connectors are inactive
    test_approach: |
      Render with currentStep=3 (steps 1,2 completed). Verify connector
      between 1-2 is active, connector between 2-3 is inactive.
    required: true

  accessibility_progressbar_role:
    category: accessibility
    description: Uses role="progressbar" with aria-value* attributes
    behavior: |
      Uses role="progressbar" with:
      - aria-valuenow={currentStep}
      - aria-valuemin={1}
      - aria-valuemax={totalSteps}
      Screen reader announces "Step X of Y".
    wcag: "4.1.2 Name, Role, Value"
    platforms: [web, ios, android]
    validation:
      - role="progressbar" applied (web)
      - aria-valuenow reflects currentStep
      - aria-valuemin is 1
      - aria-valuemax reflects totalSteps
    test_approach: |
      Render stepper. Verify role="progressbar", aria-valuenow, aria-valuemin,
      aria-valuemax attributes (web).
    required: true

  validation_size_restriction:
    category: validation
    description: Throws error if size='sm' is used
    behavior: |
      Steppers only support sizes 'md' and 'lg'. If size='sm' is provided,
      the component throws an error.
    wcag: null
    platforms: [web, ios, android]
    validation:
      - size='sm' throws error
      - size='md' renders correctly
      - size='lg' renders correctly
    test_approach: |
      Render with size='sm' — verify error thrown. Render with size='md'
      and size='lg' — verify normal rendering.
    required: true
