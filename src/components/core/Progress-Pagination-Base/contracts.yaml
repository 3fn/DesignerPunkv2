version: "1.0.0"
component: Progress-Pagination-Base
family: Progress-Indicator

contracts:
  composition_node_only:
    category: composition
    description: Renders only Node-Base primitives (no connectors, no labels)
    behavior: |
      Composes Progress-Indicator-Node-Base for each visible item.
      Does NOT render Connector-Base or Label-Base.
      All nodes receive content='none' (dots only).
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Renders Node-Base for each visible item
      - No Connector-Base elements present
      - No Label-Base elements present
      - All nodes have content='none'
    test_approach: |
      Render pagination with 5 items. Verify 5 nodes, no connectors,
      no labels. Verify all nodes have content='none'.
    required: true

  state_binary_derivation:
    category: state
    description: Derives binary state (current vs incomplete) from currentItem
    behavior: |
      Simple binary logic:
      - Node at currentItem index → state 'current'
      - All other nodes → state 'incomplete'
      No completed or error states in pagination.
    wcag: null
    platforms: [web, ios, android]
    validation:
      - Exactly one node has state 'current'
      - All other nodes have state 'incomplete'
      - State derivation is deterministic
    test_approach: |
      Render with currentItem=2. Verify node 2 is current, all others incomplete.
    required: true

  performance_virtualization:
    category: performance
    description: Renders max 5 visible nodes using sliding window
    behavior: |
      When totalItems > 5, only 5 nodes are rendered:
      - Pages 1-3: show nodes 1-5
      - Pages 4 to (totalItems-3): center current at position 3
      - Last 3 pages: show last 5 nodes
      Window shifts immediately (no animation).
    wcag: null
    platforms: [web, ios, android]
    validation:
      - totalItems ≤ 5 renders all nodes
      - totalItems > 5 renders exactly 5 nodes
      - Current node centered when possible
    test_approach: |
      Render with totalItems=10, currentItem=5. Verify exactly 5 nodes
      rendered with current centered.
    required: true

  accessibility_actual_position:
    category: accessibility
    description: ARIA label reflects actual position, not virtualized subset
    behavior: |
      The accessibility label always shows the real position
      (e.g., "Page 26 of 50") regardless of which 5 nodes are visible.
      Uses role="group" on web.
    wcag: "4.1.2 Name, Role, Value"
    platforms: [web, ios, android]
    validation:
      - aria-label shows actual currentItem and totalItems
      - role="group" applied (web)
      - Screen reader announces actual position
    test_approach: |
      Render with totalItems=50, currentItem=26. Verify aria-label says
      "Page 26 of 50" (web).
    required: true
