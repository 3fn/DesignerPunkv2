version: "1.0.0"
component: Progress-Stepper-Detailed
family: Progress-Indicator

contracts:
  composes_all_primitives:
    category: composition
    description: Renders Node-Base, Connector-Base, and Label-Base primitives
    behavior: |
      Stepper-Detailed composes Progress-Indicator-Node-Base for each step,
      Progress-Indicator-Connector-Base between all adjacent nodes (n-1 connectors
      for n nodes), and Progress-Indicator-Label-Base for each step.
      Completed nodes receive content='checkmark' (icon precedence).
      Current/incomplete/error nodes with icon receive content='icon'.
      Current/incomplete/error nodes without icon receive content='none'.
    platforms: [web, ios, android]
    validation:
      - Renders Node-Base for each step
      - Renders Connector-Base between all adjacent nodes
      - Renders Label-Base for each step
      - Completed nodes have content='checkmark' (regardless of user icon)
      - Non-completed nodes with icon have content='icon'
      - Non-completed nodes without icon have content='none'

  derives_priority_state:
    category: state
    description: Derives state with priority error > completed > current > incomplete
    behavior: |
      State derivation uses priority logic (same as Stepper-Base):
      1. error: step index in errorSteps (highest priority)
      2. completed: step index < currentStep and not in errorSteps
      3. current: step index === currentStep and not in errorSteps
      4. incomplete: step index > currentStep
    platforms: [web, ios, android]
    validation:
      - Error steps override all other states
      - Steps before currentStep are completed (unless error)
      - Exactly one step is current (unless in errorSteps)
      - Steps after currentStep are incomplete

  icon_precedence:
    category: composition
    description: Completed steps always show checkmark, user icon only for other states
    behavior: |
      Icon precedence rules:
      - Completed: ALWAYS checkmark (user-provided icon ignored)
      - Current/incomplete/error with icon: renders user icon
      - Current/incomplete/error without icon: renders empty circle (none)
    platforms: [web, ios, android]
    validation:
      - Completed nodes always render checkmark
      - User icon ignored for completed nodes
      - User icon rendered for current/incomplete/error nodes
      - No icon renders as empty circle for current/incomplete/error

  connector_state_derivation:
    category: state
    description: Connectors are active between completed nodes, inactive otherwise
    behavior: |
      Connector state is derived from adjacent node states:
      - active: both left and right nodes are completed
      - inactive: any other combination
    platforms: [web, ios, android]
    validation:
      - Connectors between completed nodes are active
      - All other connectors are inactive

  list_accessibility:
    category: accessibility
    description: Uses role="list" with role="listitem" per step
    behavior: |
      The detailed stepper uses role="list" with each step as role="listitem".
      Error steps include "error" suffix in aria-label.
      Optional steps include "optional" suffix in aria-label.
      Screen reader announces "Step X of Y: [label]".
    wcag: "4.1.2 Name, Role, Value"
    platforms: [web, ios, android]
    validation:
      - role="list" applied to container (web)
      - role="listitem" applied to each step (web)
      - Error steps have "error" in aria-label
      - Optional steps have "optional" in aria-label

  size_restriction:
    category: validation
    description: Throws error if size='sm' is used
    behavior: |
      Steppers only support sizes 'md' and 'lg'. If size='sm' is provided,
      the component throws an error in both development and production.
    platforms: [web, ios, android]
    validation:
      - size='sm' throws error
      - size='md' renders correctly
      - size='lg' renders correctly

summary:
  total_contracts: 6
  categories:
    composition: 2
    state: 2
    accessibility: 1
    validation: 1
  platforms: [web, ios, android]
