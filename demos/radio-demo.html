<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Radio Demo - DesignerPunk</title>
  <link rel="stylesheet" href="tokens.css">
  <link rel="stylesheet" href="demo-styles.css">
  <script type="module" src="designerpunk.esm.js"></script>
  <style>
    .event-log {
      background: var(--black-300);
      border: var(--border-default) solid var(--gray-300);
      border-radius: var(--radius-100);
      padding-inline: var(--space-inset-100);
      padding-block: var(--space-inset-100);
      min-block-size: 80px;
      max-block-size: 160px;
      overflow-y: auto;
      font-family: var(--font-family-mono);
      font-size: var(--typography-caption-font-size);
      color: var(--gray-100);
      margin-block-start: var(--space-100);
    }
    .event-log-entry {
      padding-block: var(--space-025);
      border-block-end: var(--border-default) solid var(--gray-400);
    }
    .event-log-entry:last-child {
      border-block-end: none;
    }
    .event-log-time {
      color: var(--gray-200);
    }
    .event-log-event {
      color: var(--cyan-300);
    }
    .event-log-detail {
      color: var(--gray-100);
    }
    .event-log-empty {
      color: var(--gray-300);
      font-style: italic;
    }
    .radio-group-display {
      display: flex;
      flex-direction: column;
      gap: var(--space-100);
    }
  </style>
</head>
<body class="demo-page">
  <header class="demo-header">
    <a href="index.html" class="demo-back-link">‚Üê All Components</a>
    <h1>üîò Radio Family Demo</h1>
    <p class="demo-subtitle">Single-selection controls with mutual exclusivity ‚Äî Input-Radio-Base (primitive) and Input-Radio-Set (group orchestrator) side-by-side</p>
  </header>

  <main>

    <!-- ============================================================
         SECTION 1: Family Overview
         ============================================================ -->
    <div class="demo-section">
      <h2>1. Family Overview</h2>
      <p>The Radio family has two components that work together. <code>&lt;input-radio-base&gt;</code> is the primitive radio button, and <code>&lt;input-radio-set&gt;</code> is the orchestrator that manages mutual exclusivity, keyboard navigation, and validation for a group of radios.</p>

      <h3>Input-Radio-Base (Primitive)</h3>
      <p>A single radio button with label, value, and optional helper text. Can be used standalone or within a Set.</p>
      <div class="radio-group-display">
        <input-radio-base label="Standalone Radio A" value="a" selected></input-radio-base>
        <input-radio-base label="Standalone Radio B" value="b"></input-radio-base>
      </div>

      <h3>Input-Radio-Set (Orchestrator)</h3>
      <p>Wraps multiple <code>&lt;input-radio-base&gt;</code> children. Provides mutual exclusivity (selecting one deselects others), arrow key navigation, and group-level validation.</p>
      <input-radio-set selected-value="option-b">
        <input-radio-base label="Option A" value="option-a"></input-radio-base>
        <input-radio-base label="Option B" value="option-b"></input-radio-base>
        <input-radio-base label="Option C" value="option-c"></input-radio-base>
      </input-radio-set>

      <div class="demo-note">
        <strong>No disabled state:</strong> DesignerPunk radios intentionally omit disabled states. If an option is unavailable, the radio should not be rendered. This ensures users always see actionable UI elements.
      </div>
    </div>

    <!-- ============================================================
         SECTION 2: Size Variants
         ============================================================ -->
    <div class="demo-section">
      <h2>2. Size Variants</h2>
      <p>Three size variants control the radio circle, dot, gap, and label typography. When used within a Set, the <code>size</code> attribute propagates to all children.</p>

      <h3>Small (sm) ‚Äî 24px circle</h3>
      <input-radio-set selected-value="sm-a" size="sm">
        <input-radio-base label="Small Option A" value="sm-a"></input-radio-base>
        <input-radio-base label="Small Option B" value="sm-b"></input-radio-base>
      </input-radio-set>

      <h3>Medium (md) ‚Äî 32px circle (default)</h3>
      <input-radio-set selected-value="md-a" size="md">
        <input-radio-base label="Medium Option A" value="md-a"></input-radio-base>
        <input-radio-base label="Medium Option B" value="md-b"></input-radio-base>
      </input-radio-set>

      <h3>Large (lg) ‚Äî 40px circle</h3>
      <input-radio-set selected-value="lg-a" size="lg">
        <input-radio-base label="Large Option A" value="lg-a"></input-radio-base>
        <input-radio-base label="Large Option B" value="lg-b"></input-radio-base>
      </input-radio-set>

      <h3>All Sizes Compared</h3>
      <div class="demo-row">
        <div class="demo-item">
          <input-radio-base label="Small" value="cmp-sm" size="sm" selected></input-radio-base>
          <span class="demo-item-label">sm (24px)</span>
        </div>
        <div class="demo-item">
          <input-radio-base label="Medium" value="cmp-md" size="md" selected></input-radio-base>
          <span class="demo-item-label">md (32px)</span>
        </div>
        <div class="demo-item">
          <input-radio-base label="Large" value="cmp-lg" size="lg" selected></input-radio-base>
          <span class="demo-item-label">lg (40px)</span>
        </div>
      </div>
    </div>

    <!-- ============================================================
         SECTION 3: Label Alignment
         ============================================================ -->
    <div class="demo-section">
      <h2>3. Label Alignment</h2>
      <p>Label alignment controls how the label text aligns vertically relative to the radio circle. Use <code>top</code> for multi-line labels.</p>

      <h3>Center Alignment (default)</h3>
      <p>Label is vertically centered with the radio circle.</p>
      <input-radio-base label="Center-aligned label" value="center" label-align="center" selected></input-radio-base>

      <h3>Top Alignment</h3>
      <p>Label aligns to the top of the radio circle ‚Äî useful for multi-line text.</p>
      <input-radio-base label="Top-aligned label with a longer description that wraps to multiple lines to demonstrate how the radio circle stays at the first line" value="top" label-align="top" selected></input-radio-base>
    </div>

    <!-- ============================================================
         SECTION 4: Helper Text and Error States
         ============================================================ -->
    <div class="demo-section">
      <h2>4. Helper Text and Error States</h2>

      <h3>With Helper Text</h3>
      <p>Helper text provides additional context below the radio.</p>
      <input-radio-base label="Free Plan" value="free" helper-text="Limited to 5 projects" selected></input-radio-base>
      <div style="margin-block-start: var(--space-100);">
        <input-radio-base label="Pro Plan" value="pro" helper-text="Unlimited projects, priority support"></input-radio-base>
      </div>

      <h3>Error State (Individual Radio)</h3>
      <p>Error message replaces helper text styling and applies error border color.</p>
      <input-radio-base label="Invalid Option" value="invalid" error-message="This option is no longer available"></input-radio-base>

      <h3>Error State (Radio Set ‚Äî Validation)</h3>
      <p>The Set supports group-level validation. When <code>required</code> is set and no selection exists, calling <code>validate()</code> shows an error.</p>
      <input-radio-set id="validation-set" required error error-message="Please select a subscription plan">
        <input-radio-base label="Basic" value="basic"></input-radio-base>
        <input-radio-base label="Standard" value="standard"></input-radio-base>
        <input-radio-base label="Premium" value="premium"></input-radio-base>
      </input-radio-set>
      <p style="color: var(--gray-200); font-size: var(--typography-caption-font-size); margin-block-start: var(--space-050);">Select an option above to clear the error</p>
    </div>

    <!-- ============================================================
         SECTION 5: Interactive States
         ============================================================ -->
    <div class="demo-section">
      <h2>5. Interactive States</h2>
      <p>Radio buttons use theme-aware blend utilities for hover state colors. Hover over and click the radios to see transitions.</p>

      <div class="demo-interactive">
        <p>Hover, focus (Tab key), and click these radios to observe state transitions:</p>

        <div class="demo-row">
          <div class="demo-item">
            <input-radio-base label="Hover me" value="hover"></input-radio-base>
            <span class="demo-item-label">Hover: 8% darker border</span>
          </div>
          <div class="demo-item">
            <input-radio-base label="Tab to me" value="focus"></input-radio-base>
            <span class="demo-item-label">Focus: outline ring</span>
          </div>
          <div class="demo-item">
            <input-radio-base label="Selected" value="selected" selected></input-radio-base>
            <span class="demo-item-label">Selected: filled dot + accent border</span>
          </div>
        </div>
      </div>

      <div class="demo-note">
        <strong>State color calculation:</strong> Uses <code>hoverColor()</code> from blend utilities for hover state (8% darker border). The dot scales in using <code>motion.selectionTransition</code> timing for smooth selection animation.
      </div>
    </div>

    <!-- ============================================================
         SECTION 6: Keyboard Navigation
         ============================================================ -->
    <div class="demo-section">
      <h2>6. Keyboard Navigation</h2>
      <p>Input-Radio-Set implements the WAI-ARIA radio group keyboard pattern with roving tabindex.</p>

      <div class="demo-interactive">
        <p>Use <kbd>Tab</kbd> to enter the group, then arrow keys to navigate:</p>
        <input-radio-set id="keyboard-set" selected-value="kb-b">
          <input-radio-base label="First" value="kb-a"></input-radio-base>
          <input-radio-base label="Second (selected)" value="kb-b"></input-radio-base>
          <input-radio-base label="Third" value="kb-c"></input-radio-base>
          <input-radio-base label="Fourth" value="kb-d"></input-radio-base>
        </input-radio-set>
        <p id="keyboard-status" style="color: var(--gray-200); font-size: var(--typography-caption-font-size); margin-block-start: var(--space-050);">Tab into the group, then use arrow keys</p>
      </div>

      <h3>Keyboard Shortcuts</h3>
      <ul class="demo-token-list">
        <li><kbd>Tab</kbd> ‚Äî Enter group on selected item (or first if none selected)</li>
        <li><kbd>Tab</kbd> again ‚Äî Exit the radio group</li>
        <li><kbd>‚Üì</kbd> / <kbd>‚Üí</kbd> ‚Äî Move to next radio (wraps from last to first)</li>
        <li><kbd>‚Üë</kbd> / <kbd>‚Üê</kbd> ‚Äî Move to previous radio (wraps from first to last)</li>
        <li><kbd>Space</kbd> ‚Äî Select the focused radio</li>
        <li><kbd>Home</kbd> ‚Äî Move to first radio</li>
        <li><kbd>End</kbd> ‚Äî Move to last radio</li>
      </ul>
    </div>

    <!-- ============================================================
         SECTION 7: Event Handling
         ============================================================ -->
    <div class="demo-section">
      <h2>7. Event Handling</h2>
      <p>Input-Radio-Base dispatches <code>select</code> events. Input-Radio-Set dispatches <code>change</code> events when the group selection changes.</p>

      <div class="demo-interactive">
        <h3>Radio Set ‚Üí <code>change</code></h3>
        <input-radio-set id="event-set">
          <input-radio-base label="Red" value="red"></input-radio-base>
          <input-radio-base label="Green" value="green"></input-radio-base>
          <input-radio-base label="Blue" value="blue"></input-radio-base>
        </input-radio-set>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-block-start: var(--space-100);">
          <span style="color: var(--gray-200); font-size: var(--typography-caption-font-size);">Event Log:</span>
          <button id="clear-log-btn" style="background: var(--gray-400); color: var(--gray-200); border: var(--border-default) solid var(--gray-300); border-radius: var(--radius-050); padding-inline: var(--space-050); padding-block: var(--space-025); cursor: pointer; font-size: var(--typography-caption-font-size); font-family: var(--font-family-body);">Clear</button>
        </div>
        <div id="event-log" class="event-log">
          <div class="event-log-empty">Click a radio to see events here...</div>
        </div>
      </div>

      <div class="demo-note">
        <strong>Event summary:</strong>
        <ul style="margin-block-start: var(--space-050); padding-inline-start: var(--space-200);">
          <li><code>input-radio-base</code> ‚Üí <code>select</code> with <code>detail.value</code> and <code>detail.selected</code> (bubbles, composed)</li>
          <li><code>input-radio-set</code> ‚Üí <code>change</code> with <code>detail.value</code> (bubbles, composed)</li>
        </ul>
      </div>
    </div>

    <!-- ============================================================
         SECTION 8: Accessibility Features
         ============================================================ -->
    <div class="demo-section">
      <h2>8. Accessibility Features</h2>

      <h3>ARIA Attributes</h3>
      <ul class="demo-token-list">
        <li><strong>Input-Radio-Base:</strong> Hidden native <code>&lt;input type="radio"&gt;</code>, <code>aria-checked</code>, <code>aria-labelledby</code>, <code>aria-describedby</code> (for helper/error text)</li>
        <li><strong>Input-Radio-Set:</strong> <code>role="radiogroup"</code>, <code>aria-describedby</code> (for group error), roving <code>tabindex</code></li>
        <li><strong>Error messages:</strong> <code>role="alert"</code> for screen reader announcement</li>
        <li><strong>Form integration:</strong> Form-Associated Custom Element via <code>ElementInternals</code> for native form submission</li>
      </ul>

      <h3>Focus Indicators</h3>
      <div class="demo-note">
        <strong>Focus ring:</strong> Uses <code>:focus-visible</code> for keyboard-only focus indicators. The outline uses <code>accessibility.focus.width</code> (2px) and <code>accessibility.focus.color</code> tokens with a 2px offset, meeting the 3:1 contrast ratio requirement.
      </div>

      <h3>Roving Tabindex</h3>
      <div class="demo-note">
        <strong>Tab behavior:</strong> Only one radio in the group has <code>tabindex="0"</code> at a time (the selected or first item). All others have <code>tabindex="-1"</code>. Arrow keys move focus within the group without requiring Tab.
      </div>
    </div>

    <!-- ============================================================
         SECTION 9: Token Verification
         ============================================================ -->
    <div class="demo-section">
      <h2>9. Token Verification</h2>
      <p>Check browser DevTools to verify these CSS custom properties are loaded:</p>

      <h3>Color Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--color-feedback-select-border-default</code> ‚Äî unselected border color</li>
        <li><code>--color-feedback-select-border-rest</code> ‚Äî selected border color</li>
        <li><code>--color-feedback-select-background-rest</code> ‚Äî dot fill color</li>
        <li><code>--color-feedback-error-border</code> ‚Äî error border color</li>
        <li><code>--color-feedback-error-text</code> ‚Äî error message text color</li>
        <li><code>--color-text-default</code> ‚Äî label text color</li>
        <li><code>--color-text-muted</code> ‚Äî helper text color</li>
      </ul>

      <h3>Typography Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--typography-label-sm-*</code> ‚Äî small size label typography</li>
        <li><code>--typography-label-md-*</code> ‚Äî medium size label typography</li>
        <li><code>--typography-label-lg-*</code> ‚Äî large size label typography</li>
        <li><code>--typography-caption-*</code> ‚Äî helper/error text typography</li>
      </ul>

      <h3>Spacing Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--space-grouped-normal</code> ‚Äî sm/md circle-to-label gap</li>
        <li><code>--space-grouped-loose</code> ‚Äî lg circle-to-label gap</li>
        <li><code>--space-grouped-tight</code> ‚Äî container vertical gap</li>
        <li><code>--space-grouped-minimal</code> ‚Äî helper/error text margin</li>
      </ul>

      <h3>Shape &amp; Border Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--radius-full</code> ‚Äî circular shape (50%)</li>
        <li><code>--border-emphasis</code> ‚Äî radio circle border width (2px)</li>
      </ul>

      <h3>Size Tokens (Circle = dot + inset √ó 2)</h3>
      <ul class="demo-token-list">
        <li><code>--icon-size-050</code> ‚Äî sm dot size (16px)</li>
        <li><code>--icon-size-075</code> ‚Äî md dot size (20px)</li>
        <li><code>--icon-size-100</code> ‚Äî lg dot size (24px)</li>
        <li><code>--space-inset-050</code> ‚Äî sm inset (4px)</li>
        <li><code>--space-inset-075</code> ‚Äî md inset (6px)</li>
        <li><code>--space-inset-100</code> ‚Äî lg inset (8px)</li>
      </ul>

      <h3>Motion Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--motion-selection-transition-duration</code> ‚Äî dot scale animation duration</li>
        <li><code>--motion-selection-transition-easing</code> ‚Äî dot scale animation easing</li>
      </ul>

      <h3>Accessibility Tokens</h3>
      <ul class="demo-token-list">
        <li><code>--accessibility-focus-width</code> ‚Äî focus outline width (2px)</li>
        <li><code>--accessibility-focus-color</code> ‚Äî focus outline color</li>
        <li><code>--accessibility-focus-offset</code> ‚Äî focus outline offset (2px)</li>
        <li><code>--tap-area-recommended</code> ‚Äî minimum touch target (48px)</li>
      </ul>
    </div>

    <!-- ============================================================
         SECTION 10: Usage Examples
         ============================================================ -->
    <div class="demo-section">
      <h2>10. Usage Examples</h2>

      <h3>HTML</h3>
      <pre class="demo-code">&lt;!-- Standalone radio --&gt;
&lt;input-radio-base
  label="Option A"
  value="option-a"
  selected
&gt;&lt;/input-radio-base&gt;

&lt;!-- Radio group with mutual exclusivity --&gt;
&lt;input-radio-set selected-value="plan-pro" size="md"&gt;
  &lt;input-radio-base label="Free" value="plan-free"
    helper-text="5 projects"&gt;&lt;/input-radio-base&gt;
  &lt;input-radio-base label="Pro" value="plan-pro"
    helper-text="Unlimited projects"&gt;&lt;/input-radio-base&gt;
  &lt;input-radio-base label="Enterprise" value="plan-enterprise"
    helper-text="Custom solutions"&gt;&lt;/input-radio-base&gt;
&lt;/input-radio-set&gt;

&lt;!-- With validation --&gt;
&lt;input-radio-set required id="my-group"&gt;
  &lt;input-radio-base label="Yes" value="yes"&gt;&lt;/input-radio-base&gt;
  &lt;input-radio-base label="No" value="no"&gt;&lt;/input-radio-base&gt;
&lt;/input-radio-set&gt;</pre>

      <h3>JavaScript</h3>
      <pre class="demo-code">// Listen for group selection changes
const radioSet = document.querySelector('input-radio-set');
radioSet.addEventListener('change', (event) =&gt; {
  console.log('Selected:', event.detail.value);
});

// Listen for individual radio selection
const radio = document.querySelector('input-radio-base');
radio.addEventListener('select', (event) =&gt; {
  console.log('Value:', event.detail.value);
  console.log('Selected:', event.detail.selected);
});

// Programmatic validation
const group = document.getElementById('my-group');
const isValid = group.validate();
// Sets error + errorMessage if required and nothing selected

// Programmatic creation
const newSet = document.createElement('input-radio-set');
newSet.size = 'lg';
newSet.onSelectionChange = (value) =&gt; {
  console.log('Selection changed:', value);
};

const radio1 = document.createElement('input-radio-base');
radio1.label = 'Dynamic Option';
radio1.value = 'dynamic';
newSet.appendChild(radio1);
document.body.appendChild(newSet);</pre>
    </div>

  </main>

  <footer class="demo-footer">
    <p>DesignerPunk Design System ‚Ä¢ Radio Family Demo</p>
  </footer>

  <script>
    // File protocol detection
    if (window.location.protocol === 'file:') {
      var banner = document.createElement('div');
      banner.className = 'demo-file-protocol-warning';
      banner.textContent = 'Components may not load correctly via file:// protocol. Use a local server: npx serve dist/browser';
      document.body.prepend(banner);
    }

    // ================================================================
    // Validation Set (Section 4) ‚Äî Clear error on selection
    // ================================================================
    var validationSet = document.getElementById('validation-set');
    if (validationSet) {
      validationSet.addEventListener('change', function() {
        validationSet.removeAttribute('error');
        validationSet.removeAttribute('error-message');
      });
    }

    // ================================================================
    // Keyboard Navigation Status (Section 6)
    // ================================================================
    var keyboardSet = document.getElementById('keyboard-set');
    var keyboardStatus = document.getElementById('keyboard-status');
    if (keyboardSet && keyboardStatus) {
      keyboardSet.addEventListener('change', function(e) {
        keyboardStatus.textContent = 'Selected: ' + e.detail.value;
      });
    }

    // ================================================================
    // Event Log (Section 7)
    // ================================================================
    var eventLog = document.getElementById('event-log');
    var clearBtn = document.getElementById('clear-log-btn');
    var eventSet = document.getElementById('event-set');
    var eventCount = 0;

    function logEvent(source, eventType, detail) {
      eventCount++;
      var time = new Date().toLocaleTimeString();
      var empty = eventLog.querySelector('.event-log-empty');
      if (empty) empty.remove();

      var entry = document.createElement('div');
      entry.className = 'event-log-entry';
      var detailStr = detail ? ' ‚Äî ' + detail : '';
      entry.innerHTML = '<span class="event-log-time">[' + time + ']</span> <span class="event-log-event">' + eventType + '</span> from <strong>' + source + '</strong><span class="event-log-detail">' + detailStr + '</span> (#' + eventCount + ')';
      eventLog.prepend(entry);

      while (eventLog.children.length > 20) {
        eventLog.removeChild(eventLog.lastChild);
      }
    }

    if (clearBtn) {
      clearBtn.addEventListener('click', function() {
        eventLog.innerHTML = '<div class="event-log-empty">Click a radio to see events here...</div>';
        eventCount = 0;
      });
    }

    // Listen for select events from individual radios within the set
    if (eventSet) {
      eventSet.addEventListener('select', function(e) {
        logEvent('Input-Radio-Base', 'select', 'value=' + e.detail.value + ', selected=' + e.detail.selected);
      });

      // Listen for change events from the set
      eventSet.addEventListener('change', function(e) {
        logEvent('Input-Radio-Set', 'change', 'value=' + e.detail.value);
      });
    }
  </script>
</body>
</html>
